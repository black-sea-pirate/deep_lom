# AI Test Platform (Mentis) - –û—Ç—á—ë—Ç –æ –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

**AI Test Platform (Mentis)** ‚Äî –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —è–∑—ã–∫–æ–≤—ã—Ö –º–æ–¥–µ–ª–µ–π (GPT-4.1) –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ RAG (Retrieval-Augmented Generation). –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π –∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤, –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–µ—Å—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —É—á–µ–±–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤.

### –û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è

1. –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç —É—á–µ–±–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã (PDF, DOCX, TXT, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
2. –°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç—ã, —Å–æ–∑–¥–∞–µ—Ç embeddings –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –≤–µ–∫—Ç–æ—Ä–Ω—É—é –ë–î (ChromaDB)
3. AI –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª—ã —á–µ—Ä–µ–∑ RAG –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–æ–ø—Ä–æ—Å—ã —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
4. –°—Ç—É–¥–µ–Ω—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —Ç–µ—Å—Ç—ã, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –æ—Ç–≤–µ—Ç—ã
5. –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∞–Ω–∞–ª–∏—Ç–∏–∫—É –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º

### üåê –î–æ—Å—Ç—É–ø –∫ –ø—Ä–æ–µ–∫—Ç—É

- **–î–æ–º–µ–Ω**: https://mentis.forzone.uk
- **API**: https://mentis.forzone.uk/api/v1
- **API Docs**: https://mentis.forzone.uk/api/docs
- **Health Check**: https://mentis.forzone.uk/api/health

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Frontend (–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω ‚úÖ)

- **Vue 3** (Composition API, `<script setup>`)
- **TypeScript** ‚Äî —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- **Vite 7.1** ‚Äî —Å–±–æ—Ä–∫–∞ –∏ dev-—Å–µ—Ä–≤–µ—Ä
- **Element Plus** ‚Äî UI –±–∏–±–ª–∏–æ—Ç–µ–∫–∞
- **Vue Router 4** ‚Äî –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è —Å guard'–∞–º–∏
- **Pinia** ‚Äî state management
- **Vue I18n** ‚Äî –∏–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è (EN, PL, UA, RU)
- **Axios** ‚Äî HTTP –∫–ª–∏–µ–Ω—Ç —Å interceptors
- **SCSS** ‚Äî —Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è —Å CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏

### Backend (–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω ‚úÖ)

- **FastAPI 0.115** (Python 3.11) ‚Äî async REST API
- **SQLAlchemy 2.0** ‚Äî async ORM
- **Pydantic v2** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **PostgreSQL 16** ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –ë–î
- **Redis 7** ‚Äî –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ Celery broker
- **ChromaDB** ‚Äî –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î –¥–ª—è RAG
- **OpenAI API (GPT-4.1)** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
- **text-embedding-3-small** ‚Äî embeddings –¥–ª—è RAG
- **Celery** ‚Äî —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤)
- **JWT (python-jose)** ‚Äî –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### Infrastructure (–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ ‚úÖ)

- **Docker Compose** ‚Äî –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è 7 —Å–µ—Ä–≤–∏—Å–æ–≤
- **Nginx** ‚Äî reverse proxy
- **Cloudflare Tunnel** ‚Äî HTTPS –¥–æ—Å—Ç—É–ø –±–µ–∑ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ—Ä—Ç–æ–≤
- **Docker Volumes** ‚Äî –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Frontend

```
src/
‚îú‚îÄ‚îÄ assets/                 # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã
‚îú‚îÄ‚îÄ components/             # –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ ThemeToggle.vue     # –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ç–µ–º—ã
‚îú‚îÄ‚îÄ i18n/                   # –ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ index.ts            # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è i18n
‚îÇ   ‚îî‚îÄ‚îÄ locales/            # –§–∞–π–ª—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤
‚îÇ       ‚îú‚îÄ‚îÄ en.ts           # English
‚îÇ       ‚îú‚îÄ‚îÄ pl.ts           # Polski
‚îÇ       ‚îú‚îÄ‚îÄ ua.ts           # –£–∫—Ä–∞—ó–Ω—Å—å–∫–∞
‚îÇ       ‚îî‚îÄ‚îÄ ru.ts           # –†—É—Å—Å–∫–∏–π
‚îú‚îÄ‚îÄ layouts/
‚îÇ   ‚îî‚îÄ‚îÄ TeacherLayout.vue   # Layout —Å –±–æ–∫–æ–≤—ã–º –º–µ–Ω—é –¥–ª—è —É—á–∏—Ç–µ–ª—è
‚îú‚îÄ‚îÄ router/
‚îÇ   ‚îî‚îÄ‚îÄ index.ts            # –ú–∞—Ä—à—Ä—É—Ç—ã —Å guards
‚îú‚îÄ‚îÄ services/               # API —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ api.ts              # Axios instance —Å interceptors
‚îÇ   ‚îú‚îÄ‚îÄ auth.service.ts     # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ project.service.ts  # –ü—Ä–æ–µ–∫—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ material.service.ts # –ú–∞—Ç–µ—Ä–∏–∞–ª—ã
‚îÇ   ‚îú‚îÄ‚îÄ participant.service.ts # –£—á–∞—Å—Ç–Ω–∏–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ test.service.ts     # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ stores/                 # Pinia stores
‚îÇ   ‚îú‚îÄ‚îÄ auth.ts             # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ project.ts          # –ü—Ä–æ–µ–∫—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ test.ts             # –¢–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ theme.ts            # –¢–µ–º–∞ (light/dark)
‚îú‚îÄ‚îÄ styles/
‚îÇ   ‚îî‚îÄ‚îÄ main.scss           # –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏, CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, —Ç–µ–º—ã
‚îú‚îÄ‚îÄ types/
‚îÇ   ‚îî‚îÄ‚îÄ index.ts            # TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
‚îú‚îÄ‚îÄ views/                  # –°—Ç—Ä–∞–Ω–∏—Ü—ã
‚îÇ   ‚îú‚îÄ‚îÄ LoginView.vue
‚îÇ   ‚îú‚îÄ‚îÄ RegisterView.vue
‚îÇ   ‚îú‚îÄ‚îÄ TeacherDashboardView.vue
‚îÇ   ‚îú‚îÄ‚îÄ TeacherParticipantsView.vue
‚îÇ   ‚îú‚îÄ‚îÄ TeacherMaterialsView.vue
‚îÇ   ‚îú‚îÄ‚îÄ TeacherAnalyticsView.vue
‚îÇ   ‚îú‚îÄ‚îÄ TeacherSettingsView.vue
‚îÇ   ‚îú‚îÄ‚îÄ ProjectCreateView.vue
‚îÇ   ‚îú‚îÄ‚îÄ ProjectDetailView.vue
‚îÇ   ‚îú‚îÄ‚îÄ ProjectStatisticsView.vue
‚îÇ   ‚îú‚îÄ‚îÄ QuestionEditorView.vue
‚îÇ   ‚îú‚îÄ‚îÄ LobbyView.vue
‚îÇ   ‚îú‚îÄ‚îÄ StudentDashboardView.vue
‚îÇ   ‚îú‚îÄ‚îÄ TestTakeView.vue
‚îÇ   ‚îî‚îÄ‚îÄ TestResultsView.vue
‚îú‚îÄ‚îÄ App.vue
‚îî‚îÄ‚îÄ main.ts
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Backend (–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ ‚úÖ)

```
backend/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ api/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ v1/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ endpoints/
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ auth.py          # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (register, login, logout, me)
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ projects.py      # CRUD –ø—Ä–æ–µ–∫—Ç–æ–≤
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ materials.py     # –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ participants.py  # –£—á–∞—Å—Ç–Ω–∏–∫–∏ –∏ –≥—Ä—É–ø–ø—ã
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ tests.py         # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ student.py       # –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ router.py            # –ì–ª–∞–≤–Ω—ã–π —Ä–æ—É—Ç–µ—Ä API v1
‚îÇ   ‚îú‚îÄ‚îÄ core/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py                # Pydantic Settings (env vars)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ security.py              # JWT —Ç–æ–∫–µ–Ω—ã, —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ deps.py                  # FastAPI dependencies (get_db, get_current_user)
‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.py                  # SQLAlchemy Base
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ session.py               # Async session factory
‚îÇ   ‚îú‚îÄ‚îÄ models/                      # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.py                  # User (teacher/student)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ project.py               # Project, QuestionTypeConfig
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ material.py              # Material, MaterialFolder
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ participant.py           # Participant, ParticipantGroup
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test.py                  # Test, Question, Answer
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ student_email.py         # StudentEmail (–º—É–ª—å—Ç–∏-email)
‚îÇ   ‚îú‚îÄ‚îÄ schemas/                     # Pydantic schemas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.py                  # UserCreate, UserLogin, UserResponse
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ project.py               # ProjectCreate, ProjectResponse
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ material.py              # MaterialUpload, MaterialResponse
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ participant.py           # ParticipantCreate, GroupCreate
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ test.py                  # TestGenerate, QuestionResponse
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ token.py                 # Token, TokenData
‚îÇ   ‚îú‚îÄ‚îÄ services/                    # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rag.py                   # RAG —Å–µ—Ä–≤–∏—Å (ChromaDB + embeddings)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ document_processor.py    # –ü–∞—Ä—Å–∏–Ω–≥ PDF, DOCX, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ai_generator.py          # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ GPT-4.1
‚îÇ   ‚îú‚îÄ‚îÄ tasks/                       # Celery –∑–∞–¥–∞—á–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ document_tasks.py        # process_document, delete_document_vectors
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ test_tasks.py            # generate_test_questions
‚îÇ   ‚îú‚îÄ‚îÄ celery_app.py                # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Celery
‚îÇ   ‚îî‚îÄ‚îÄ main.py                      # FastAPI application
‚îú‚îÄ‚îÄ Dockerfile                       # Python 3.11-slim –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ requirements.txt                 # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ .dockerignore                    # –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è Docker
```

---

## üê≥ Docker Compose - 7 —Å–µ—Ä–≤–∏—Å–æ–≤

```yaml
services:
  postgres: # PostgreSQL 16 Alpine - –æ—Å–Ω–æ–≤–Ω–∞—è –ë–î
  redis: # Redis 7 Alpine - –∫—ç—à + Celery broker
  chromadb: # ChromaDB - –≤–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î –¥–ª—è RAG
  backend: # FastAPI application (Uvicorn)
  celery_worker: # Celery worker (2 –≤–æ—Ä–∫–µ—Ä–∞, –æ—á–µ—Ä–µ–¥–∏: documents, tests)
  nginx: # Nginx + Vue.js frontend (production build)
  cloudflared: # Cloudflare Tunnel –¥–ª—è HTTPS

volumes:
  postgres_data: # –î–∞–Ω–Ω—ã–µ PostgreSQL
  redis_data: # –î–∞–Ω–Ω—ã–µ Redis
  chroma_data: # –î–∞–Ω–Ω—ã–µ ChromaDB
  uploads_data: # –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

networks:
  mentis_network: # –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Å–µ—Ç—å Docker
```

---

## üîê –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å (Teacher)

- –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ (—Ç–µ—Å—Ç–∞–º–∏)
- –ó–∞–≥—Ä—É–∑–∫–∞ —É—á–µ–±–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –≤ –ø–∞–ø–∫–∏
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ (—Å—Ç—É–¥–µ–Ω—Ç—ã, –≥—Ä—É–ø–ø—ã)
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
- –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ (Lobby)

### –°—Ç—É–¥–µ–Ω—Ç (Student)

- –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

---

## üìÑ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

| –°—Ç—Ä–∞–Ω–∏—Ü–∞ | –ü—É—Ç—å        | –û–ø–∏—Å–∞–Ω–∏–µ                              |
| -------- | ----------- | ------------------------------------- |
| Login    | `/login`    | –í—Ö–æ–¥ —Å –≤—ã–±–æ—Ä–æ–º —Ä–æ–ª–∏ (teacher/student) |
| Register | `/register` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è       |

### –ó–æ–Ω–∞ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è (–ø–æ–¥ TeacherLayout)

| –°—Ç—Ä–∞–Ω–∏—Ü–∞        | –ü—É—Ç—å                              | –û–ø–∏—Å–∞–Ω–∏–µ                          |
| --------------- | --------------------------------- | --------------------------------- |
| Dashboard       | `/teacher`                        | –°–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤, —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ  |
| Participants    | `/teacher/participants`           | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏ –∏ –≥—Ä—É–ø–ø–∞–º–∏  |
| Materials       | `/teacher/materials`              | –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤, –ø–∞–ø–∫–∏, drag-drop |
| Analytics       | `/teacher/analytics`              | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –≥—Ä–∞—Ñ–∏–∫–∏, —Ç–æ–ø —Å—Ç—É–¥–µ–Ω—Ç—ã |
| Settings        | `/teacher/settings`               | –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–∞                |
| Project Create  | `/teacher/project/create`         | 4-—à–∞–≥–æ–≤—ã–π wizard —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ |
| Project Detail  | `/teacher/project/:id`            | –î–µ—Ç–∞–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞                    |
| Question Editor | `/teacher/project/:id/edit`       | –†–µ–¥–∞–∫—Ç–æ—Ä –≤–æ–ø—Ä–æ—Å–æ–≤                 |
| Lobby           | `/teacher/project/:id/lobby`      | –û–∂–∏–¥–∞–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–æ–º   |
| Statistics      | `/teacher/project/:id/statistics` | –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ –ø—Ä–æ–µ–∫—Ç—É             |

### –ó–æ–Ω–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞

| –°—Ç—Ä–∞–Ω–∏—Ü–∞  | –ü—É—Ç—å                        | –û–ø–∏—Å–∞–Ω–∏–µ                      |
| --------- | --------------------------- | ----------------------------- |
| Dashboard | `/student`                  | –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã |
| Test Take | `/student/test/:id`         | –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞             |
| Results   | `/student/test/:id/results` | –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞              |

---

## üìä TypeScript —Ç–∏–ø—ã (src/types/index.ts)

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:

```typescript
User; // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (id, email, role, firstName, lastName)
Project; // –ü—Ä–æ–µ–∫—Ç/—Ç–µ—Å—Ç (id, title, settings, status, materials, tests)
ProjectSettings; // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (totalTime, timePerQuestion, questionTypes, maxStudents)
Material; // –ó–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π —Ñ–∞–π–ª (id, fileName, fileType, folderId)
MaterialFolder; // –ü–∞–ø–∫–∞ –¥–ª—è –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
Participant; // –°—Ç—É–¥–µ–Ω—Ç (individual –∏–ª–∏ group-member)
ParticipantGroup; // –ì—Ä—É–ø–ø–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
Test; // –¢–µ—Å—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞ (questions, answers, score, status)
Answer; // –û—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å
```

### –¢–∏–ø—ã –≤–æ–ø—Ä–æ—Å–æ–≤ (Question):

- `SingleChoiceQuestion` ‚Äî –æ–¥–∏–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
- `MultipleChoiceQuestion` ‚Äî –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- `TrueFalseQuestion` ‚Äî –ø—Ä–∞–≤–¥–∞/–ª–æ–∂—å
- `ShortAnswerQuestion` ‚Äî –∫–æ—Ä–æ—Ç–∫–∏–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç
- `EssayQuestion` ‚Äî —Ä–∞–∑–≤—ë—Ä–Ω—É—Ç—ã–π –æ—Ç–≤–µ—Ç
- `MatchingQuestion` ‚Äî —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä

---

## üé® –¢–µ–º—ã –∏ —Å—Ç–∏–ª–∏

### CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (main.scss)

- **–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞** ‚Äî `:root` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- **–¢—ë–º–Ω–∞—è —Ç–µ–º–∞** ‚Äî `.dark` –∫–ª–∞—Å—Å –Ω–∞ `<html>`

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```scss
--color-primary, --color-secondary, --color-accent
--color-background, --color-surface, --color-border
--color-text, --color-text-light
--spacing-xs/sm/md/lg/xl
--radius-sm/md/lg
--shadow-sm/md/lg
```

### Element Plus Dark Theme

–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤—Å–µ—Ö Element Plus CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è —Ç—ë–º–Ω–æ–π —Ç–µ–º—ã:

- `--el-bg-color`, `--el-text-color-*`, `--el-border-color-*`
- –°—Ç–∏–ª–∏ –¥–ª—è: cards, tables, inputs, menus, dialogs, dropdowns, tags, etc.

---

## üåê API –°–µ—Ä–≤–∏—Å—ã (–≥–æ—Ç–æ–≤—ã –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)

### api.ts ‚Äî Axios instance

```typescript
- Base URL: VITE_API_URL (http://localhost:8000/api/v1)
- Timeout: 30 —Å–µ–∫—É–Ω–¥
- Request interceptor: JWT token injection
- Response interceptor: 401 ‚Üí redirect to login, error handling
```

### –°–µ—Ä–≤–∏—Å—ã:

| –§–∞–π–ª                   | Endpoints                                                                        |
| ---------------------- | -------------------------------------------------------------------------------- |
| auth.service.ts        | login, register, logout, getCurrentUser, refreshToken                            |
| project.service.ts     | getAll, getById, create, update, delete, updateStatus                            |
| material.service.ts    | getAll, upload, delete, getFolders, createFolder, updateFolder, deleteFolder     |
| participant.service.ts | getAll, create, update, delete, getGroups, createGroup, updateGroup, deleteGroup |
| test.service.ts        | generate, getByProject, submit, getResults                                       |

---

## üîú –ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–∞ Backend

> ‚ö†Ô∏è **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ 29.11.2025**: Backend –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω!
> –í—Å–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ –Ω–∏–∂–µ endpoints —É–∂–µ —Å–æ–∑–¥–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç.

### 1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è ‚úÖ

```
POST /api/v1/auth/register    ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
POST /api/v1/auth/login       ‚Äî –≤—Ö–æ–¥ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JWT)
POST /api/v1/auth/logout      ‚Äî –≤—ã—Ö–æ–¥
GET  /api/v1/auth/me          ‚Äî —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
POST /api/v1/auth/refresh     ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
```

### 2. –ü—Ä–æ–µ–∫—Ç—ã ‚úÖ

```
GET    /api/v1/projects           ‚Äî —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è
POST   /api/v1/projects           ‚Äî —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
GET    /api/v1/projects/:id       ‚Äî –¥–µ—Ç–∞–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞
PUT    /api/v1/projects/:id       ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
DELETE /api/v1/projects/:id       ‚Äî —É–¥–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç
PATCH  /api/v1/projects/:id/status ‚Äî –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å
```

### 3. –ú–∞—Ç–µ—Ä–∏–∞–ª—ã ‚úÖ

```
GET    /api/v1/materials              ‚Äî —Å–ø–∏—Å–æ–∫ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
POST   /api/v1/materials/upload       ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ (multipart/form-data)
DELETE /api/v1/materials/:id          ‚Äî —É–¥–∞–ª–∏—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª
GET    /api/v1/materials/folders      ‚Äî —Å–ø–∏—Å–æ–∫ –ø–∞–ø–æ–∫
POST   /api/v1/materials/folders      ‚Äî —Å–æ–∑–¥–∞—Ç—å –ø–∞–ø–∫—É
PUT    /api/v1/materials/folders/:id  ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –ø–∞–ø–∫—É
DELETE /api/v1/materials/folders/:id  ‚Äî —É–¥–∞–ª–∏—Ç—å –ø–∞–ø–∫—É
```

### 4. –£—á–∞—Å—Ç–Ω–∏–∫–∏ ‚úÖ

```
GET    /api/v1/participants           ‚Äî —Å–ø–∏—Å–æ–∫ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
POST   /api/v1/participants           ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞
PUT    /api/v1/participants/:id       ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞
DELETE /api/v1/participants/:id       ‚Äî —É–¥–∞–ª–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞
GET    /api/v1/participants/groups    ‚Äî —Å–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø
POST   /api/v1/participants/groups    ‚Äî —Å–æ–∑–¥–∞—Ç—å –≥—Ä—É–ø–ø—É
PUT    /api/v1/participants/groups/:id ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –≥—Ä—É–ø–ø—É
DELETE /api/v1/participants/groups/:id ‚Äî —É–¥–∞–ª–∏—Ç—å –≥—Ä—É–ø–ø—É
```

### 5. –¢–µ—Å—Ç—ã –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ‚úÖ

```
POST /api/v1/tests/generate           ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–∞ —á–µ—Ä–µ–∑ AI (async Celery task)
     Body: { projectId, materialIds, settings }

GET  /api/v1/tests/project/:projectId ‚Äî —Ç–µ—Å—Ç—ã –ø–æ –ø—Ä–æ–µ–∫—Ç—É
POST /api/v1/tests/:id/submit         ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –æ—Ç–≤–µ—Ç—ã —Å—Ç—É–¥–µ–Ω—Ç–∞
GET  /api/v1/tests/:id/results        ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞
GET  /api/v1/tests/:id/status         ‚Äî —Å—Ç–∞—Ç—É—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
```

### 6. AI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (GPT-4.1) ‚úÖ

- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (PDF, DOCX, TXT, images —Å OCR)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ embeddings —á–µ—Ä–µ–∑ OpenAI text-embedding-3-small
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–æ–≤ –≤ ChromaDB
- ‚úÖ RAG –ø–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —á–µ—Ä–µ–∑ GPT-4.1
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –≤ PostgreSQL

---

## üìê –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è)

```sql
users (id, email, password_hash, role, first_name, last_name, created_at)

projects (id, teacher_id, title, description, group_name, status,
          total_time, time_per_question, max_students,
          start_time, end_time, created_at)

question_type_configs (id, project_id, type, count)

materials (id, project_id, folder_id, file_name, file_type, file_path, uploaded_at)

material_folders (id, teacher_id, name, description, created_at)

participants (id, teacher_id, email, first_name, last_name, type, group_id, created_at)

participant_groups (id, teacher_id, name, description, created_at)

questions (id, project_id, type, text, points, options, correct_answer, created_at)

tests (id, project_id, student_id, status, score, max_score, started_at, completed_at)

answers (id, test_id, question_id, answer, is_correct, score, feedback)
```

---

## üöÄ –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (Frontend)

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# Dev —Å–µ—Ä–≤–µ—Ä (http://localhost:5173)
npm run dev

# Production build
npm run build
```

### Docker Compose (Production)

```bash
# –°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:
# - CLOUDFLARE_TUNNEL_TOKEN
# - OPENAI_API_KEY
# - POSTGRES_USER, POSTGRES_PASSWORD, POSTGRES_DB

# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up -d --build

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker ps

# –õ–æ–≥–∏ backend
docker logs mentis_backend --tail 50

# –õ–æ–≥–∏ Celery worker
docker logs mentis_celery_worker --tail 50
```

### Environment Variables (.env)

```env
# === Cloudflare Tunnel ===
CLOUDFLARE_TUNNEL_TOKEN=eyJhIjoi...

# === OpenAI API ===
OPENAI_API_KEY=sk-proj-...
OPENAI_MODEL=gpt-4.1

# === PostgreSQL ===
POSTGRES_USER=mentis_admin
POSTGRES_PASSWORD=MentisSecure2025!
POSTGRES_DB=mentis_db

# === Security ===
SECRET_KEY=mentis-secret-key-2025

# === CORS ===
BACKEND_CORS_ORIGINS=https://mentis.forzone.uk,http://localhost:5173
```

---

## üîß –†–µ—à—ë–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. Pydantic Settings –∏ CORS Origins

**–ü—Ä–æ–±–ª–µ–º–∞**: `pydantic-settings` –Ω–µ –º–æ–≥ –ø–∞—Ä—Å–∏—Ç—å —Å—Ç—Ä–æ–∫—É CORS origins –∏–∑ .env —Ñ–∞–π–ª–∞.

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω `@field_validator` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –æ–±–æ–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤:

```python
@field_validator("BACKEND_CORS_ORIGINS", mode="before")
def assemble_cors_origins(cls, v):
    if isinstance(v, str):
        if v.startswith("["):
            return json.loads(v)  # JSON —Ñ–æ—Ä–º–∞—Ç
        return [i.strip() for i in v.split(",")]  # Comma-separated
    return v
```

### 2. Circular Import –≤ SQLAlchemy –º–æ–¥–µ–ª—è—Ö

**–ü—Ä–æ–±–ª–µ–º–∞**: –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–π –∏–º–ø–æ—Ä—Ç –º–µ–∂–¥—É `User` –∏ `Base` –∫–ª–∞—Å—Å–∞–º–∏.

**–†–µ—à–µ–Ω–∏–µ**:

- –í—ã–Ω–µ—Å–ª–∏ `Base` –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª `db/base.py`
- –ò–º–ø–æ—Ä—Ç –º–æ–¥–µ–ª–µ–π –≤ `models/__init__.py` –¥–ª—è Alembic

### 3. .env —Ñ–∞–π–ª –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

**–ü—Ä–æ–±–ª–µ–º–∞**: Celery worker –ø–∞–¥–∞–ª —Å –æ—à–∏–±–∫–æ–π –ø–∞—Ä—Å–∏–Ω–≥–∞ `DotEnvSettingsSource`.

**–†–µ—à–µ–Ω–∏–µ**:

- –û—Ç–∫–ª—é—á–∏–ª–∏ `env_file` –≤ `SettingsConfigDict` (`env_file=None`)
- –í—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `docker-compose.yml` environment

### 4. –†–∞–∑–¥–µ–ª—å–Ω—ã–µ Docker –æ–±—Ä–∞–∑—ã

**–ü—Ä–æ–±–ª–µ–º–∞**: `backend` –∏ `celery_worker` –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ —Ä–∞–∑–Ω—ã–µ –æ–±—Ä–∞–∑—ã.

**–†–µ—à–µ–Ω–∏–µ**: –û–±–∞ —Å–µ—Ä–≤–∏—Å–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π Dockerfile, –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –æ–±–æ–∏—Ö –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö.

### 5. AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Ç–µ–º—ã –≤–º–µ—Å—Ç–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–†–ï–®–ï–ù–û 05.12.2025)

**–ü—Ä–æ–±–ª–µ–º–∞**: OpenAI Assistant —Å `file_search` tool –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Ñ–∞–π–ª—ã ‚Äî –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª –≤–æ–ø—Ä–æ—Å—ã –∏–∑ —Å–≤–æ–∏—Ö –∑–Ω–∞–Ω–∏–π.

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:

```python
# –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ —Ç–æ–ª—å–∫–æ message_creation, –±–µ–∑ tool_calls:
run_steps = [{'type': 'message_creation'}]  # –ù–µ—Ç file_search!
```

**–†–µ—à–µ–Ω–∏–µ**: –î–≤—É—Ö—à–∞–≥–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥:

1. –û—Ç–¥–µ–ª—å–Ω—ã–π assistant –¥–ª—è –ò–ó–í–õ–ï–ß–ï–ù–ò–Ø —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ file_search
2. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π chat completion –¥–ª—è –ì–ï–ù–ï–†–ê–¶–ò–ò –≤–æ–ø—Ä–æ—Å–æ–≤ —Å –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º

**–§–∞–π–ª**: `backend/app/services/openai_vectorstore.py`

---

## üìä Celery Tasks (–§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏)

### document_tasks.py

```python
@celery.task(name="process_document", queue="documents")
async def process_document(material_id: str):
    """
    1. –ü–æ–ª—É—á–∞–µ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª –∏–∑ –ë–î
    2. –ü–∞—Ä—Å–∏—Ç –¥–æ–∫—É–º–µ–Ω—Ç (PDF/DOCX/TXT/Image)
    3. –°–æ–∑–¥–∞–µ—Ç embeddings —á–µ—Ä–µ–∑ OpenAI
    4. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ ChromaDB
    5. –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –º–∞—Ç–µ—Ä–∏–∞–ª–∞
    """

@celery.task(name="delete_document_vectors", queue="documents")
async def delete_document_vectors(material_id: str):
    """–£–¥–∞–ª—è–µ—Ç –≤–µ–∫—Ç–æ—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏–∑ ChromaDB"""
```

### test_tasks.py

```python
@celery.task(name="generate_test_questions", queue="tests")
async def generate_test_questions(project_id: str, settings: dict):
    """
    1. –ü–æ–ª—É—á–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ ChromaDB (RAG)
    2. –§–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç –¥–ª—è GPT-4.1
    3. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤–æ–ø—Ä–æ—Å—ã —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤
    4. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤–æ–ø—Ä–æ—Å—ã –≤ PostgreSQL
    5. –£–≤–µ–¥–æ–º–ª—è–µ—Ç –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
    """

@celery.task(name="check_generation_status", queue="tests")
async def check_generation_status(task_id: str):
    """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—Ç–∞—Ç—É—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–∞"""
```

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **JWT —Ç–æ–∫–µ–Ω—ã** —Å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏ (30 –º–∏–Ω access, 7 –¥–Ω–µ–π refresh)
- **Bcrypt** –¥–ª—è —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞—Ä–æ–ª–µ–π
- **CORS** –æ–≥—Ä–∞–Ω–∏—á–µ–Ω —Å–ø–∏—Å–∫–æ–º –¥–æ–º–µ–Ω–æ–≤
- **Cloudflare Tunnel** - –Ω–µ—Ç –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ—Ä—Ç–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- **Environment variables** –¥–ª—è –≤—Å–µ—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤
- **Docker network** –∏–∑–æ–ª—è—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ Frontend

- [x] –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (Login, Register, guards)
- [x] Dashboard –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏
- [x] Wizard —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ (4 —à–∞–≥–∞)
- [x] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏ —Å –ø–∞–ø–∫–∞–º–∏
- [x] –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ (—Å—Ç—É–¥–µ–Ω—Ç—ã + –≥—Ä—É–ø–ø—ã)
- [x] –†–µ–¥–∞–∫—Ç–æ—Ä –≤–æ–ø—Ä–æ—Å–æ–≤ (mock)
- [x] –°—Ç—Ä–∞–Ω–∏—Ü–∞ Lobby –¥–ª—è –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤
- [x] –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- [x] Dashboard —Å—Ç—É–¥–µ–Ω—Ç–∞
- [x] –ü—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞
- [x] –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∞
- [x] –¢—ë–º–Ω–∞—è —Ç–µ–º–∞ (–ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Element Plus)
- [x] –ò–Ω—Ç–µ—Ä–Ω–∞—Ü–∏–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è (EN, PL, UA, RU)
- [x] API —Å–µ—Ä–≤–∏—Å—ã –≥–æ—Ç–æ–≤—ã –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- [x] Responsive –¥–∏–∑–∞–π–Ω

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ Backend

- [x] FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å async –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
- [x] SQLAlchemy 2.0 –º–æ–¥–µ–ª–∏ (User, Project, Material, Participant, Test, Question, Answer)
- [x] Pydantic v2 —Å—Ö–µ–º—ã —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
- [x] JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (access + refresh tokens)
- [x] CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
- [x] –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ (multipart/form-data)
- [x] ChromaDB –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è RAG
- [x] OpenAI API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (GPT-4.1, embeddings)
- [x] Celery workers –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
- [x] Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –∏ Celery broker
- [x] Health check endpoint
- [x] CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è production

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ Infrastructure

- [x] Docker Compose —Å 7 —Å–µ—Ä–≤–∏—Å–∞–º–∏
- [x] PostgreSQL 16 —Å persistent volume
- [x] Redis 7 —Å persistent volume
- [x] ChromaDB —Å persistent volume
- [x] Nginx reverse proxy
- [x] Cloudflare Tunnel –¥–ª—è HTTPS
- [x] Health checks –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- [x] –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –∏ —Ä–∞–±–æ—Ç–∞—é—Ç

---

## üöÄ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# Dev —Å–µ—Ä–≤–µ—Ä (http://localhost:5173)
npm run dev

# Production build
npm run build
```

### Environment variables

```env
# .env.development
VITE_API_URL=http://localhost:8000/api/v1
VITE_APP_TITLE=AI Test Platform
```

---

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

1. **JWT —Ç–æ–∫–µ–Ω** —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `localStorage` –ø–æ–¥ –∫–ª—é—á–æ–º `token`
2. **Axios interceptor** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç `Authorization: Bearer {token}`
3. –ü—Ä–∏ **401 –æ—Ç–≤–µ—Ç–µ** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/login`
4. **–§–∞–π–ª—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è** —á–µ—Ä–µ–∑ `multipart/form-data` —Å –ø–æ–ª–µ–º `file`
5. **–¢–µ–º–∞** —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `localStorage` –ø–æ–¥ –∫–ª—é—á–æ–º `theme` ("light" | "dark")
6. **–Ø–∑—ã–∫** —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `localStorage` –ø–æ–¥ –∫–ª—é—á–æ–º `locale` ("en" | "pl" | "ua" | "ru")
7. **Backend API** –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ `/api/v1/` —á–µ—Ä–µ–∑ Nginx proxy

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è

### Frontend

1. `src/types/index.ts` ‚Äî –≤—Å–µ TypeScript –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
2. `src/services/api.ts` ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Axios
3. `src/router/index.ts` ‚Äî –≤—Å–µ –º–∞—Ä—à—Ä—É—Ç—ã
4. `src/stores/` ‚Äî Pinia stores —Å mock –¥–∞–Ω–Ω—ã–º–∏
5. `src/i18n/locales/en.ts` ‚Äî –≤—Å–µ –∫–ª—é—á–∏ –ø–µ—Ä–µ–≤–æ–¥–æ–≤

### Backend

1. `backend/app/core/config.py` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. `backend/app/api/v1/endpoints/` ‚Äî –≤—Å–µ API endpoints
3. `backend/app/models/` ‚Äî SQLAlchemy –º–æ–¥–µ–ª–∏
4. `backend/app/schemas/` ‚Äî Pydantic —Å—Ö–µ–º—ã
5. `backend/app/services/` ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (RAG, AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
6. `backend/app/tasks/` ‚Äî Celery –∑–∞–¥–∞—á–∏

### Infrastructure

1. `docker-compose.yml` ‚Äî –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
2. `backend/Dockerfile` ‚Äî –æ–±—Ä–∞–∑ backend/celery
3. `nginx/nginx.conf` ‚Äî reverse proxy –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
4. `.env` ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ –≤ git!)

---

## üìù –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç 25.11.2025 (–≤–µ—á–µ—Ä)

### –ü–∞–Ω–µ–ª—å —Å—Ç—É–¥–µ–Ω—Ç–∞ (StudentDashboardView.vue) ‚Äî –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞

#### –ù–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:

1. **–ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–µ–Ω—é –≤ —Ö–µ–¥–µ—Ä–µ**

   - –ö–Ω–æ–ø–∫–∞ "Dashboard" ‚Äî –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –≥–ª–∞–≤–Ω—É—é
   - –ö–Ω–æ–ø–∫–∞ "–ú–æ—è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞" ‚Äî –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–∏–∞–ª–æ–≥ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π

2. **–ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏ –≤ —Ö–µ–¥–µ—Ä–µ**

   - ThemeToggle ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å–≤–µ—Ç–ª–æ–π/—Ç—ë–º–Ω–æ–π —Ç–µ–º—ã
   - –°–µ–ª–µ–∫—Ç–æ—Ä —è–∑—ã–∫–∞ (EN/PL/UA/RU)

3. **–ö–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏**

   - "–í—Å—å–æ–≥–æ –¢–µ—Å—Ç—ñ–≤" ‚Üí –¥–∏–∞–ª–æ–≥ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º
   - "–°–µ—Ä–µ–¥–Ω—ñ–π –ë–∞–ª" ‚Üí –¥–∏–∞–ª–æ–≥ —Å –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–æ–º
   - "–ó–∞–≤–µ—Ä—à–µ–Ω—ñ –¢–µ—Å—Ç–∏" ‚Üí —Ç–∞–±–ª–∏—Ü–∞ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

4. **–ú–µ–Ω—é –∞–∫–∫–∞—É–Ω—Ç–∞ (dropdown)**

   - **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ email**:
     - –°–ø–∏—Å–æ–∫ email —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ —É—á—Ä–µ–∂–¥–µ–Ω–∏—è–º
     - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö email (–¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫—É—Ä—Å–æ–≤/—É—á–µ–±–Ω—ã—Ö –∑–∞–≤–µ–¥–µ–Ω–∏–π)
     - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ email
     - –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–æ—Å–Ω–æ–≤–Ω—ã—Ö email
   - **–°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è**:
     - –§–æ—Ä–º–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π (–º–∏–Ω. 6 —Å–∏–º–≤–æ–ª–æ–≤, —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π)

5. **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ç—ë–º–Ω–∞—è —Ç–µ–º–∞**
   - Header —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

#### –ù–æ–≤—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã (–≤—Å–µ 4 —è–∑—ã–∫–∞):

```typescript
// –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–µ–∫—Ü–∏–∏:
studentAccount: {
  manageEmails,
    changePassword,
    yourEmails,
    emailsHint,
    primary,
    makePrimary,
    addNewEmail,
    addEmail,
    institution,
    emailPlaceholder,
    institutionPlaceholder,
    emailAdded,
    emailRemoved,
    primaryChanged,
    confirmRemoveEmail,
    cannotRemovePrimary,
    invalidEmail,
    currentPassword,
    newPassword,
    confirmNewPassword,
    passwordChanged,
    passwordMismatch,
    passwordTooShort;
}

studentStats: {
  totalDescription, averageDescription, testName, course, date;
}
```

#### –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –¥–ª—è backend:

```
# –ù–æ–≤—ã–µ endpoints –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞:

# Email management
GET    /api/v1/student/emails           ‚Äî —Å–ø–∏—Å–æ–∫ email —Å—Ç—É–¥–µ–Ω—Ç–∞
POST   /api/v1/student/emails           ‚Äî –¥–æ–±–∞–≤–∏—Ç—å email
DELETE /api/v1/student/emails/:id       ‚Äî —É–¥–∞–ª–∏—Ç—å email
PATCH  /api/v1/student/emails/:id/primary ‚Äî —Å–¥–µ–ª–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–º

# Password
POST   /api/v1/student/change-password  ‚Äî —Å–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å
       Body: { currentPassword, newPassword }

# Statistics
GET    /api/v1/student/statistics       ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞
GET    /api/v1/student/tests/completed  ‚Äî —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–π–¥–µ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
```

#### TypeScript —Ç–∏–ø—ã –¥–ª—è backend:

```typescript
// –î–æ–±–∞–≤–∏—Ç—å –≤ types/index.ts

interface StudentEmail {
  id: string;
  email: string;
  isPrimary: boolean;
  institution: string;
  createdAt: Date;
}

interface ChangePasswordRequest {
  currentPassword: string;
  newPassword: string;
}

interface StudentStatistics {
  totalTests: number;
  completedTests: number;
  averageScore: number;
}

interface CompletedTest {
  id: string;
  title: string;
  groupName: string;
  score: number;
  maxScore: number;
  completedAt: Date;
}
```

---

_–û—Ç—á—ë—Ç —Å–æ—Å—Ç–∞–≤–ª–µ–Ω: 25 –Ω–æ—è–±—Ä—è 2025_
_–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 1 –¥–µ–∫–∞–±—Ä—è 2025_
_Frontend –≤–µ—Ä—Å–∏—è: 0.0.0 (pre-release)_
_Backend –≤–µ—Ä—Å–∏—è: 1.0.0_

---

## üìù –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç 01.12.2025

### –°–µ—Å—Å–∏—è: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

#### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ i18n –æ—à–∏–±–æ–∫ —Å —Å–∏–º–≤–æ–ª–æ–º `@`

**–ü—Ä–æ–±–ª–µ–º–∞**: Vue-i18n –ø–∞–¥–∞–ª —Å `SyntaxError` –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –¥–∏–∞–ª–æ–≥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å—Ç—É–¥–µ–Ω—Ç–∞ ‚Äî —Å–∏–º–≤–æ–ª `@` –≤ email placeholder –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞–ª—Å—è –∫–∞–∫ linked message.

**–†–µ—à–µ–Ω–∏–µ**: –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ `@` –≤–æ –≤—Å–µ—Ö locale —Ñ–∞–π–ª–∞—Ö:

```typescript
// –ë—ã–ª–æ:
emailPlaceholder: "student@university.edu";
// –°—Ç–∞–ª–æ:
emailPlaceholder: "student{'@'}university.edu";
```

**–ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ —Ñ–∞–π–ª—ã**: `en.ts`, `ru.ts`, `ua.ts`, `pl.ts`

---

#### 2. –ó–∞–º–µ–Ω–∞ mock –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ API –≤—ã–∑–æ–≤—ã –≤ ProjectCreateView

**–ü—Ä–æ–±–ª–µ–º–∞**: Wizard —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª mock –º–∞—Ç–µ—Ä–∏–∞–ª—ã –≤–º–µ—Å—Ç–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –∏–∑ API.

**–†–µ—à–µ–Ω–∏–µ**:

- –î–æ–±–∞–≤–ª–µ–Ω –≤—ã–∑–æ–≤ `materialService.getFolders()` –∏ `materialService.getMaterials()`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ª–∏–º–∏—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –≤ backend (`size` —É–≤–µ–ª–∏—á–µ–Ω —Å 100 –¥–æ 1000)

---

#### 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ endpoint'–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤ –≤–æ–∑–≤—Ä–∞—â–∞–ª–∞—Å—å 404 –æ—à–∏–±–∫–∞ ‚Äî endpoint –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª.

**–ù–æ–≤—ã–µ endpoints –≤ `projects.py`**:

```python
POST /{project_id}/generate-tests     # –ó–∞–ø—É—Å–∫ AI –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Celery
GET  /{project_id}/generate-tests/{job_id}  # –°—Ç–∞—Ç—É—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
GET  /{project_id}/questions          # –°–ø–∏—Å–æ–∫ –≤–æ–ø—Ä–æ—Å–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞
POST /{project_id}/questions          # –°–æ–∑–¥–∞–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞ –≤—Ä—É—á–Ω—É—é
PUT  /{project_id}/questions/{id}     # –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞
DELETE /{project_id}/questions/{id}   # –£–¥–∞–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞
```

---

#### 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≤—è–∑–∫–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∫ –ø—Ä–æ–µ–∫—Ç—É

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –Ω–µ –ø—Ä–∏–≤—è–∑—ã–≤–∞–ª–∏—Å—å, –ø–æ–ª—É—á–∞–ª–∏ –æ—à–∏–±–∫—É "No materials linked".

**–†–µ—à–µ–Ω–∏–µ**:

- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `addMaterials()` –≤ `project.service.ts`
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `configureSettings()` –≤ `project.service.ts`
- –û–±–Ω–æ–≤–ª—ë–Ω flow –≤ `handleGenerate()` ‚Äî —Ç–µ–ø–µ—Ä—å –≤—ã–∑—ã–≤–∞–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ API

---

#### 5. –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è ProjectDetailView –∏ QuestionEditorView

**–ü—Ä–æ–±–ª–µ–º–∞**: –°—Ç—Ä–∞–Ω–∏—Ü—ã "Edit" –∏ "Edit Questions" –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏ placeholder.

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ**:

**ProjectDetailView.vue**:

- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–µ–∫—Ç–µ
- –°–ø–∏—Å–æ–∫ –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤
- –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π (Activate, Complete, Delete)

**QuestionEditorView.vue**:

- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤ –≤—Ä—É—á–Ω—É—é
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
- –£–¥–∞–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –≤–æ–ø—Ä–æ—Å–æ–≤

---

#### 6. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ TypeScript

**–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ `src/types/index.ts`**:

```typescript
interface Project {
  status:
    | "draft"
    | "ready"
    | "active"
    | "completed"
    | "generating"
    | "vectorizing";
  vectorizationStatus?: string;
  vectorizationProgress?: number;
}
```

---

#### 7. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –ø–µ—Ä–µ–¥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π

**–ü—Ä–æ–±–ª–µ–º–∞**: AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞ ‚Äî –º–∞—Ç–µ—Ä–∏–∞–ª—ã –Ω–µ –±—ã–ª–∏ –≤–µ–∫—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ã.

**–†–µ—à–µ–Ω–∏–µ**:

- –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã `startVectorization()` –∏ `getVectorizationStatus()` –≤ `project.service.ts`
- –û–±–Ω–æ–≤–ª—ë–Ω `handleGenerate()` –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è —à–∞–≥–∞ –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `ai_generator.py` ‚Äî —Ç–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è `project_id` –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏ ChromaDB

---

#### 8. UI –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞

**–î–æ–±–∞–≤–ª–µ–Ω–æ**: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞:

- Progress circle —Å –ø—Ä–æ—Ü–µ–Ω—Ç–∞–º–∏
- –¢–µ–∫—É—â–∏–π —à–∞–≥ (Creating project ‚Üí Adding materials ‚Üí Vectorizing ‚Üí Generating)
- –î–µ—Ç–∞–ª–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "2/3 materials processed")
- –ü–æ–¥—Å–∫–∞–∑–∫–∞ "Please wait, do not close this page"

**–ù–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è**:

```typescript
const progressStep = ref("");
const progressPercent = ref(0);
const progressDetails = ref("");
```

---

### üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (—Ç—Ä–µ–±—É—é—Ç –≤–Ω–∏–º–∞–Ω–∏—è)

#### AI Test Generation Timeout

**–°–∏–º–ø—Ç–æ–º**: –ü–æ—Å–ª–µ ~10-15 –º–∏–Ω—É—Ç –æ–∂–∏–¥–∞–Ω–∏—è ‚Äî "Test generation timed out"

**–ü—Ä–∏—á–∏–Ω–∞**: Celery tasks —Ä–∞–±–æ—Ç–∞—é—Ç, –Ω–æ:

1. Vectorization –∑–∞–Ω–∏–º–∞–µ—Ç –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
2. AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ OpenAI API –∫–ª—é—á–∞

**–õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç**:

```
Vectorization taking long, continuing with available data...
Test generation timed out
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è**:

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `OPENAI_API_KEY` –≤ `.env`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Celery worker: `docker logs mentis_celery_worker --tail 100`
3. –£–≤–µ–ª–∏—á–∏—Ç—å timeout –∏–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º

---

### üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (01.12.2025)

| –§–∞–π–ª                                        | –ò–∑–º–µ–Ω–µ–Ω–∏—è                                                     |
| ------------------------------------------- | ------------------------------------------------------------- |
| `src/i18n/locales/*.ts`                     | –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ `@` –∫–∞–∫ `{'@'}`                                 |
| `src/views/ProjectCreateView.vue`           | –†–µ–∞–ª—å–Ω—ã–µ API, –ø—Ä–æ–≥—Ä–µ—Å—Å UI, vectorization                      |
| `src/views/ProjectDetailView.vue`           | –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–±—ã–ª–æ placeholder)                          |
| `src/views/QuestionEditorView.vue`          | –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–±—ã–ª–æ placeholder)                          |
| `src/services/project.service.ts`           | –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã (addMaterials, configureSettings, vectorization) |
| `src/types/index.ts`                        | –ù–æ–≤—ã–µ —Å—Ç–∞—Ç—É—Å—ã –ø—Ä–æ–µ–∫—Ç–∞                                         |
| `backend/app/api/v1/endpoints/projects.py`  | Endpoints –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏, –≤–æ–ø—Ä–æ—Å–æ–≤ CRUD                            |
| `backend/app/api/v1/endpoints/materials.py` | –£–≤–µ–ª–∏—á–µ–Ω –ª–∏–º–∏—Ç size –¥–æ 1000                                   |
| `backend/app/services/ai_generator.py`      | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–¥–∞—á–∞ project_id                                |
| `backend/app/tasks/test_tasks.py`           | –ü–µ—Ä–µ–¥–∞—á–∞ project_id –≤ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä                               |

---

## üìå –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç         | –°—Ç–∞—Ç—É—Å      | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ                 |
| ----------------- | ----------- | -------------------------- |
| Frontend (Vue 3)  | ‚úÖ –ì–æ—Ç–æ–≤    | –í—Å–µ views —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã      |
| Backend (FastAPI) | ‚úÖ –ì–æ—Ç–æ–≤    | –í—Å–µ endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã  |
| PostgreSQL        | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä healthy          |
| Redis             | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | Celery broker active       |
| ChromaDB          | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | Vector DB ready            |
| Celery Worker     | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | Tasks registered           |
| Nginx             | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | Reverse proxy active       |
| Cloudflare Tunnel | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | HTTPS –Ω–∞ mentis.forzone.uk |
| **AI Generation** | ‚ö†Ô∏è Timeout  | –¢—Ä–µ–±—É–µ—Ç –æ—Ç–ª–∞–¥–∫–∏ Celery     |

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:**

1. ‚ö†Ô∏è **–û—Ç–ª–∞–¥–∫–∞ AI –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏** ‚Äî –ø—Ä–æ–≤–µ—Ä–∏—Ç—å Celery tasks, OpenAI API
2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ frontend ‚Üî backend
3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π Alembic
4. Unit/Integration —Ç–µ—Å—Ç—ã
5. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (Prometheus, Grafana)

---

## üìù –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç 05.12.2025

### –°–µ—Å—Å–∏—è: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏

#### üî• –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç!

**–ü—Ä–æ–±–ª–µ–º–∞**: AI –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–µ–º—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, SSH), –∞ –Ω–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Cockpit).

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —á–µ—Ä–µ–∑ –ª–æ–≥–∏ Celery**:

```
INFO: Vector Store created: vs_xxxx
INFO: Files indexed in Vector Store
INFO: Run steps: [{'type': 'message_creation'}]  # ‚Üê –ù–ï–¢ tool_calls –¥–ª—è file_search!
```

**–ü—Ä–∏—á–∏–Ω–∞**: OpenAI Assistant —Å–æ–∑–¥–∞–≤–∞–ª—Å—è —Å `file_search` tool, –Ω–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ run assistant –Ω–µ –≤—ã–∑—ã–≤–∞–ª —ç—Ç–æ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç ‚Äî –æ–Ω –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª –æ—Ç–≤–µ—Ç –∏–∑ —Å–≤–æ–∏—Ö –∑–Ω–∞–Ω–∏–π.

**–†–µ—à–µ–Ω–∏–µ**: –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω `openai_vectorstore.py` —Å –¥–≤—É—Ö—à–∞–≥–æ–≤—ã–º –ø–æ–¥—Ö–æ–¥–æ–º:

**–®–∞–≥ 1**: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —á–µ—Ä–µ–∑ file_search

```python
def _retrieve_document_content(self, vector_store_id: str) -> str:
    """
    –°–æ–∑–¥–∞—ë—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ assistant —Å –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ú –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º file_search
    –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –ü–û–õ–ù–û–ì–û —Ç–µ–∫—Å—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞.
    """
    assistant = self.client.beta.assistants.create(
        name="Document Content Extractor",
        instructions="""You MUST use the file_search tool to read the documents.
        Extract and return the COMPLETE text content from all documents.
        Do not summarize. Return the raw text.""",
        model="gpt-4-turbo-preview",
        tools=[{"type": "file_search"}],
        tool_resources={"file_search": {"vector_store_ids": [vector_store_id]}}
    )

    thread = self.client.beta.threads.create()
    self.client.beta.threads.messages.create(
        thread_id=thread.id,
        role="user",
        content="Use file_search to extract ALL text content from the uploaded documents."
    )

    run = self.client.beta.threads.runs.create_and_poll(
        thread_id=thread.id,
        assistant_id=assistant.id
    )
    # ... –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
```

**–®–∞–≥ 2**: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ Chat Completion —Å –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã–º –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º

```python
def _generate_questions_from_content(self, content: str, configs: list) -> list:
    """
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π GPT chat completion –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤
    –Ω–∞ –æ—Å–Ω–æ–≤–µ –†–ï–ê–õ–¨–ù–û–ì–û —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞.
    """
    prompt = f"""Based on the following educational content, generate test questions.

DOCUMENT CONTENT:
{content}

Generate questions ONLY based on the information provided above.
Do NOT use general knowledge about the topic."""

    response = self.client.chat.completions.create(
        model="gpt-4-turbo-preview",
        messages=[{"role": "user", "content": prompt}],
        response_format={"type": "json_object"}
    )
    # ... –ø–∞—Ä—Å–∏—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–æ–ø—Ä–æ—Å—ã
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–ª ‚Äî "–Ω–∞–∫–æ–Ω–µ—Ü —Ç–æ!!! –ø–æ–ª—É—á–∏–ª–æ—Å—å" ‚Äî –≤–æ–ø—Ä–æ—Å—ã —Ç–µ–ø–µ—Ä—å –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞.

---

#### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ `'Project' object has no attribute 'settings'`

**–§–∞–π–ª**: `backend/app/api/v1/endpoints/student.py`

**–ü—Ä–æ–±–ª–µ–º–∞**: –ö–æ–¥ –ø—ã—Ç–∞–ª—Å—è –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ `project.settings.get("totalTime")`, –Ω–æ –≤ –º–æ–¥–µ–ª–∏ Project –Ω–µ—Ç –∞—Ç—Ä–∏–±—É—Ç–∞ `settings` ‚Äî —ç—Ç–æ —Å–ª–æ–≤–∞—Ä—å –∏–∑ frontend.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** (—Å—Ç—Ä–æ–∫–∞ ~362):

```python
# –ë—ã–ª–æ:
total_time = project.settings.get("totalTime", 60)

# –°—Ç–∞–ª–æ:
total_time = project.total_time or 60
```

---

#### 3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ endpoints –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–∞

**–§–∞–π–ª**: `backend/app/api/v1/endpoints/projects.py`

**–ù–æ–≤—ã–µ endpoints**:

```python
# GET /projects/{project_id}/students
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ email —Å—Ç—É–¥–µ–Ω—Ç–æ–≤, –¥–æ–ø—É—â–µ–Ω–Ω—ã—Ö –∫ –ø—Ä–æ–µ–∫—Ç—É
@router.get("/{project_id}/students")
async def get_project_students(project_id: str, ...):
    return project.allowed_students or []

# POST /projects/{project_id}/students
# –î–æ–±–∞–≤–ª—è–µ—Ç email —Å—Ç—É–¥–µ–Ω—Ç–∞ –≤ allowed_students
@router.post("/{project_id}/students")
async def add_student_to_project(project_id: str, data: dict, ...):
    allowed = project.allowed_students or []
    if data["email"] not in allowed:
        allowed.append(data["email"])
        project.allowed_students = allowed
        await db.commit()
    return {"message": "Student added", "students": allowed}

# DELETE /projects/{project_id}/students/{email}
# –£–¥–∞–ª—è–µ—Ç email —Å—Ç—É–¥–µ–Ω—Ç–∞ –∏–∑ allowed_students
@router.delete("/{project_id}/students/{email}")
async def remove_student_from_project(project_id: str, email: str, ...):
    allowed = project.allowed_students or []
    if email in allowed:
        allowed.remove(email)
        project.allowed_students = allowed
        await db.commit()
    return {"message": "Student removed", "students": allowed}
```

---

#### 4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ frontend —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏

**–§–∞–π–ª**: `src/services/project.service.ts`

**–ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã**:

```typescript
async getProjectStudents(projectId: string): Promise<string[]> {
  const response = await api.get(`/projects/${projectId}/students`);
  return response.data;
}

async addStudentToProject(projectId: string, email: string): Promise<{message: string, students: string[]}> {
  const response = await api.post(`/projects/${projectId}/students`, { email });
  return response.data;
}

async removeStudentFromProject(projectId: string, email: string): Promise<{message: string, students: string[]}> {
  const response = await api.delete(`/projects/${projectId}/students/${encodeURIComponent(email)}`);
  return response.data;
}
```

---

#### 5. –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∞ LobbyView.vue ‚Äî —É–¥–∞–ª–µ–Ω–∏–µ mock –¥–∞–Ω–Ω—ã—Ö

**–§–∞–π–ª**: `src/views/LobbyView.vue`

**–ë—ã–ª–æ** (mock –¥–∞–Ω–Ω—ã–µ):

```typescript
const waitingStudents = ref([
  {
    id: "1",
    firstName: "Alice",
    lastName: "Johnson",
    email: "alice@uni.edu",
    status: "ready",
  },
  {
    id: "2",
    firstName: "Bob",
    lastName: "Smith",
    email: "bob@uni.edu",
    status: "waiting",
  },
]);
```

**–°—Ç–∞–ª–æ** (—Ä–µ–∞–ª—å–Ω—ã–µ API –≤—ã–∑–æ–≤—ã):

```typescript
// Real students data from backend
const allowedStudents = ref<string[]>([]);
const loading = ref(false);
const addingStudent = ref(false);

onMounted(async () => {
  await loadProject();
  await loadStudents();
});

const loadStudents = async () => {
  loading.value = true;
  try {
    allowedStudents.value = await projectService.getProjectStudents(projectId);
  } catch (error) {
    allowedStudents.value = [];
  } finally {
    loading.value = false;
  }
};

const handleAddStudent = async () => {
  const result = await projectService.addStudentToProject(projectId, email);
  allowedStudents.value = result.students;
};

const handleRemoveStudent = async (email: string) => {
  const result = await projectService.removeStudentFromProject(
    projectId,
    email
  );
  allowedStudents.value = result.students;
};
```

---

#### 6. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ ‚Äî –±–µ–ª—ã–π —ç–∫—Ä–∞–Ω –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞–∑–∞–¥

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–ù–∞–∑–∞–¥" –∏–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ–∫–∞–∑—ã–≤–∞–ª—Å—è –±–µ–ª—ã–π —ç–∫—Ä–∞–Ω.

**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏ –≤ router.push():

- –ü—É—Ç—å –≤ —Ä–æ—É—Ç–µ—Ä–µ: `/teacher/project/:id`
- –ü—É—Ç—å –≤ –∫–æ–¥–µ: `/teacher/projects/:id` (–ª–∏—à–Ω—è—è `s`)

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è**:

**QuestionEditorView.vue**:

```typescript
// –ë—ã–ª–æ:
router.push(`/teacher/projects/${projectId.value}`);

// –°—Ç–∞–ª–æ:
router.push(`/teacher/project/${projectId.value}`);
```

**ProjectDetailView.vue**:

```typescript
// –ë—ã–ª–æ:
router.push(`/teacher/projects/${projectId.value}/questions`);

// –°—Ç–∞–ª–æ:
router.push(`/teacher/project/${projectId.value}/edit`);
```

---

### üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (05.12.2025)

| –§–∞–π–ª                                         | –ò–∑–º–µ–Ω–µ–Ω–∏—è                                                                     |
| -------------------------------------------- | ----------------------------------------------------------------------------- |
| `backend/app/services/openai_vectorstore.py` | **–ü–û–õ–ù–ê–Ø –ü–ï–†–ï–†–ê–ë–û–¢–ö–ê** ‚Äî –¥–≤—É—Ö—à–∞–≥–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞               |
| `backend/app/api/v1/endpoints/student.py`    | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ `project.settings` ‚Üí `project.total_time`                         |
| `backend/app/api/v1/endpoints/projects.py`   | +3 endpoints (GET/POST/DELETE students)                                       |
| `src/services/project.service.ts`            | +3 –º–µ—Ç–æ–¥–∞ (getProjectStudents, addStudentToProject, removeStudentFromProject) |
| `src/views/LobbyView.vue`                    | –£–¥–∞–ª–µ–Ω—ã mock –¥–∞–Ω–Ω—ã–µ, –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ä–µ–∞–ª—å–Ω—ã–µ API –≤—ã–∑–æ–≤—ã                            |
| `src/views/QuestionEditorView.vue`           | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø—É—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ goBack()                                             |
| `src/views/ProjectDetailView.vue`            | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø—É—Ç—å –∫ —Ä–µ–¥–∞–∫—Ç–æ—Ä—É –≤–æ–ø—Ä–æ—Å–æ–≤                                           |

---

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å–ª–µ —ç—Ç–æ–π —Å–µ—Å—Å–∏–∏

1. **AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤** ‚Äî –≤–æ–ø—Ä–æ—Å—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –†–ï–ê–õ–¨–ù–û–ì–û —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞
2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–∞** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –ø–æ email —á–µ—Ä–µ–∑ API
3. **Lobby —Å—Ç—Ä–∞–Ω–∏—Ü–∞** ‚Äî –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∏–∑ –ë–î
4. **–ù–∞–≤–∏–≥–∞—Ü–∏—è** ‚Äî –∫–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

---

### ‚ö†Ô∏è –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **–ü–æ–ª–Ω—ã–π flow –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å—Ç—É–¥–µ–Ω—Ç–∞**:

   - –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç email –≤ Lobby
   - –°—Ç—É–¥–µ–Ω—Ç —Å —ç—Ç–∏–º email –≤–∏–¥–∏—Ç –ø—Ä–æ–µ–∫—Ç –≤ —Å–≤–æ—ë–º Dashboard
   - –°—Ç—É–¥–µ–Ω—Ç –º–æ–∂–µ—Ç –Ω–∞—á–∞—Ç—å —Ç–µ—Å—Ç

2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö** –≤ LobbyView:
   - –¢–∞–±–ª–∏—Ü–∞ –æ–∂–∏–¥–∞–µ—Ç –æ–±—ä–µ–∫—Ç—ã —Å `firstName`, `lastName`, `status`
   - –°–µ–π—á–∞—Å —Ö—Ä–∞–Ω–∏–º —Ç–æ–ª—å–∫–æ `email[]`
   - –í–æ–∑–º–æ–∂–Ω–æ –Ω—É–∂–Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫–∞ UI –∏–ª–∏ backend

---

### üîß –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏

```bash
# Backend + Celery
docker-compose up -d --build backend celery_worker

# Nginx (frontend)
docker restart mentis_nginx

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker logs mentis_celery_worker --tail 100
docker logs mentis_backend --tail 50
```

---

## üìå –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç                | –°—Ç–∞—Ç—É—Å             | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ                      |
| ------------------------ | ------------------ | ------------------------------- |
| Frontend (Vue 3)         | ‚úÖ –ì–æ—Ç–æ–≤           | –í—Å–µ views —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã           |
| Backend (FastAPI)        | ‚úÖ –ì–æ—Ç–æ–≤           | –í—Å–µ endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã       |
| PostgreSQL               | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç        | –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä healthy               |
| Redis                    | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç        | Celery broker active            |
| ChromaDB                 | ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è | –ó–∞–º–µ–Ω—ë–Ω –Ω–∞ OpenAI Vector Stores |
| **OpenAI Vector Stores** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç        | –ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ –∫ RAG              |
| Celery Worker            | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç        | Tasks registered                |
| Nginx                    | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç        | Reverse proxy active            |
| Cloudflare Tunnel        | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç        | HTTPS –Ω–∞ mentis.forzone.uk      |
| **AI Generation**        | ‚úÖ –†–ê–ë–û–¢–ê–ï–¢!       | –î–≤—É—Ö—à–∞–≥–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥              |

---

## üöÄ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é —Å–µ—Å—Å–∏—é

1. **–î–æ—Ä–∞–±–æ—Ç–∞—Ç—å UI Lobby** ‚Äî —Å–µ–π—á–∞—Å —Ç–∞–±–ª–∏—Ü–∞ –æ–∂–∏–¥–∞–µ—Ç –æ–±—ä–µ–∫—Ç—ã, –∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç –º–∞—Å—Å–∏–≤ email
2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å student flow** ‚Äî —Å—Ç—É–¥–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –≤–∏–¥–µ—Ç—å –ø—Ä–æ–µ–∫—Ç—ã –≥–¥–µ –µ–≥–æ email –≤ allowed_students
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞** ‚Äî TestTakeView –∏ —Å–∞–±–º–∏—Ç –æ—Ç–≤–µ—Ç–æ–≤
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** ‚Äî –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Prometheus/Grafana –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

---

_–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 5 –¥–µ–∫–∞–±—Ä—è 2025_
_Frontend –≤–µ—Ä—Å–∏—è: 0.0.0 (pre-release)_
_Backend –≤–µ—Ä—Å–∏—è: 1.0.0_

---

## üìù –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç 05.12.2025 (–°–µ—Å—Å–∏—è 2) ‚Äî Claude Opus 4.5

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ —Å–µ—Å—Å–∏–∏

1. ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (Participant Confirmation)
2. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤ (SQLAlchemy, 422 –æ—à–∏–±–∫–∏, –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤)
3. ‚úÖ **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è N —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ç–µ—Å—Ç–∞** –Ω–∞ –æ—Å–Ω–æ–≤–µ `max_students`

---

### 1. –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (Participant Confirmation)

#### –ü—Ä–æ–±–ª–µ–º–∞:

–†–∞–Ω–µ–µ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –≤—Ä—É—á–Ω—É—é –¥–æ–±–∞–≤–ª—è–ª email —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç. –°—Ç—É–¥–µ–Ω—Ç—ã –º–æ–≥–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —Å–∏—Å—Ç–µ–º–µ.

#### –†–µ—à–µ–Ω–∏–µ ‚Äî –î–≤—É—Ö—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è:

**–°—Ü–µ–Ω–∞—Ä–∏–π 1**: –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞

1. –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç email –≤ TeacherParticipantsView
2. –°–∏—Å—Ç–µ–º–∞ –∏—â–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞ –ø–æ email –≤ –ë–î
3. –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω ‚Äî –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω—è–µ—Ç –∏–º—è/—Ñ–∞–º–∏–ª–∏—é, —Å–æ–∑–¥–∞—ë—Ç `Participant` —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º `pending`
4. –°—Ç—É–¥–µ–Ω—Ç –≤–∏–¥–∏—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ —Å–≤–æ—ë–º Dashboard ‚Üí –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç/–û—Ç–∫–ª–æ–Ω—è–µ—Ç

**–°—Ü–µ–Ω–∞—Ä–∏–π 2**: –°—Ç—É–¥–µ–Ω—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–∞–∫—Ç

1. –°—Ç—É–¥–µ–Ω—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—é —á–µ—Ä–µ–∑ –µ–≥–æ email
2. –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –∑–∞–ø—Ä–æ—Å –≤ TeacherParticipantsView
3. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç/–û—Ç–∫–ª–æ–Ω—è–µ—Ç –∑–∞–ø—Ä–æ—Å

#### –ù–æ–≤—ã–µ –ø–æ–ª—è –≤ –º–æ–¥–µ–ª–∏ `Participant`:

```python
# backend/app/models/participant.py
class Participant(Base):
    # ... existing fields ...

    # –°—Ç–∞—Ç—É—Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
    confirmation_status: Mapped[str] = mapped_column(
        String(20),
        default="pending",
        nullable=False
    )  # pending, confirmed, rejected

    # –°–≤—è–∑—å —Å–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–º (–µ—Å–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω)
    student_user_id: Mapped[Optional[uuid.UUID]] = mapped_column(
        UUID(as_uuid=True),
        ForeignKey("users.id", ondelete="SET NULL"),
        nullable=True
    )
```

#### –ú–∏–≥—Ä–∞—Ü–∏—è `003_participant_confirmation.py`:

```python
def upgrade():
    op.add_column('participants',
        sa.Column('confirmation_status', sa.String(20),
                  nullable=False, server_default='confirmed'))
    op.add_column('participants',
        sa.Column('student_user_id', UUID(as_uuid=True), nullable=True))
    op.create_foreign_key(
        'fk_participants_student_user',
        'participants', 'users',
        ['student_user_id'], ['id'],
        ondelete='SET NULL'
    )
```

#### –ù–æ–≤—ã–µ Backend endpoints:

```python
# backend/app/api/v1/endpoints/participants.py

# GET /participants/lookup?email=xxx
# –ü–æ–∏—Å–∫ —Å—Ç—É–¥–µ–Ω—Ç–∞ –ø–æ email –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è
@router.get("/lookup")
async def lookup_participant(email: str, db: AsyncSession):
    user = await db.execute(
        select(User).where(User.email == email, User.role == "student")
    )
    if user:
        return {"found": True, "firstName": user.first_name, ...}
    return {"found": False}

# POST /participants/{id}/confirm
# –°—Ç—É–¥–µ–Ω—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
@router.post("/{id}/confirm")
async def confirm_participant(id: UUID, db: AsyncSession, current_user: User):
    participant.confirmation_status = "confirmed"

# POST /participants/{id}/reject
# –°—Ç—É–¥–µ–Ω—Ç –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ
@router.post("/{id}/reject")
async def reject_participant(id: UUID, db: AsyncSession, current_user: User):
    participant.confirmation_status = "rejected"

# POST /participants/contact-request
# –°—Ç—É–¥–µ–Ω—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–∞–∫—Ç —Å –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–º
@router.post("/contact-request")
async def request_contact(data: ContactRequestCreate, ...):
    # –°–æ–∑–¥–∞—ë—Ç Participant —Å confirmation_status="contact_requested"
```

#### Frontend –∏–∑–º–µ–Ω–µ–Ω–∏—è:

**TeacherParticipantsView.vue**:

- –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∏–º–µ–Ω–∏/—Ñ–∞–º–∏–ª–∏–∏ –ø—Ä–∏ –≤–≤–æ–¥–µ email (debounce 500ms)
- –ù–æ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ "Status" —Å –±–µ–π–¥–∂–∞–º–∏ (pending/confirmed/rejected)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É

**StudentDashboardView.vue**:

- –ù–æ–≤–∞—è –≤–∫–ª–∞–¥–∫–∞ "Notifications" —Å pending –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è–º–∏
- –ö–Ω–æ–ø–∫–∏ "Accept" / "Decline"

**LobbyView.vue**:

- –í—ã–±–æ—Ä —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∏–∑ —Å–ø–∏—Å–∫–∞ confirmed contacts
- –î–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞ —Å —á–µ–∫–±–æ–∫—Å–∞–º–∏

---

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –±–∞–≥–æ–≤

#### 2.1 SQLAlchemy RelationshipError ‚Äî Multiple Foreign Keys

**–û—à–∏–±–∫–∞**:

```
sqlalchemy.exc.AmbiguousForeignKeysError: Could not determine join
condition between parent/child tables on relationship User.participants
- there are multiple foreign key paths linking the tables.
```

**–ü—Ä–∏—á–∏–Ω–∞**: –ú–æ–¥–µ–ª—å `Participant` –∏–º–µ–µ—Ç –¥–≤–∞ ForeignKey –∫ `User`:

- `teacher_id` ‚Äî –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞–ª —É—á–∞—Å—Ç–Ω–∏–∫–∞
- `student_user_id` ‚Äî —Å—Ç—É–¥–µ–Ω—Ç (–Ω–æ–≤–æ–µ –ø–æ–ª–µ)

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** –≤ `backend/app/models/user.py`:

```python
class User(Base):
    # –£–∫–∞–∑—ã–≤–∞–µ–º –∫–∞–∫–æ–π –∏–º–µ–Ω–Ω–æ FK –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è relationships
    participants: Mapped[List["Participant"]] = relationship(
        "Participant",
        back_populates="teacher",
        foreign_keys="[Participant.teacher_id]"  # ‚Üê –Ø–≤–Ω–æ —É–∫–∞–∑–∞–Ω FK
    )
```

#### 2.2 –û—à–∏–±–∫–∞ 422 –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

**–û—à–∏–±–∫–∞**:

```
POST /api/v1/participants 422 Unprocessable Entity
{detail: [{loc: ["query", "page"], msg: "field required"}]}
```

**–ü—Ä–∏—á–∏–Ω–∞**: Endpoint —Ç—Ä–µ–±–æ–≤–∞–ª `page` –ø–∞—Ä–∞–º–µ—Ç—Ä, –∞ frontend –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞–ª –µ–≥–æ.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** –≤ `src/services/participant.service.ts`:

```typescript
// –ë—ã–ª–æ:
async getConfirmedParticipants() {
  const response = await api.get('/participants', {
    params: { confirmation_status: 'confirmed' }
  });
}

// –°—Ç–∞–ª–æ:
async getConfirmedParticipants() {
  const response = await api.get('/participants', {
    params: { confirmation_status: 'confirmed', page: 1 }  // ‚Üê –î–æ–±–∞–≤–ª–µ–Ω page
  });
}
```

#### 2.3 –ü—Ä–æ–µ–∫—Ç—ã –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ –ø—Ä—è–º–æ–º –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ `/teacher` –∏–ª–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã ‚Äî –ø—Ä–æ–µ–∫—Ç—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å.

**–ü—Ä–∏—á–∏–Ω–∞**: –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª –≤—ã–∑–æ–≤ `fetchProjects()` –≤ `onMounted`.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ** –≤ `src/views/TeacherDashboardView.vue`:

```typescript
// –ë—ã–ª–æ:
onMounted(() => {
  // –ø—É—Å—Ç–æ
});

// –°—Ç–∞–ª–æ:
onMounted(() => {
  projectStore.fetchProjects();
});
```

---

### 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è N —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ç–µ—Å—Ç–∞ üéØ

**–ö–ª—é—á–µ–≤–∞—è —Ñ–∏—á–∞ –ø—Ä–æ–µ–∫—Ç–∞**: –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —Ç–µ—Å—Ç–∞, —á—Ç–æ–±—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å —Å–ø–∏—Å—ã–≤–∞–Ω–∏–µ.

#### 3.1 –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –º–æ–¥–µ–ª—è—Ö

**backend/app/models/test.py**:

```python
class Question(Base):
    # ... existing fields ...

    # –ù–æ–º–µ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞ (–¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤)
    variant_number: Mapped[int] = mapped_column(
        Integer,
        default=1,
        index=True
    )

class Test(Base):
    # ... existing fields ...

    # –ù–æ–º–µ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π —Å—Ç—É–¥–µ–Ω—Ç—É
    variant_number: Mapped[int] = mapped_column(
        Integer,
        default=1
    )
```

#### 3.2 –ú–∏–≥—Ä–∞—Ü–∏—è `004_test_variants.py`:

```python
def upgrade():
    # –î–æ–±–∞–≤–ª—è–µ–º variant_number –≤ questions
    op.add_column('questions',
        sa.Column('variant_number', sa.Integer(),
                  nullable=False, server_default='1'))

    # –ò–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
    op.create_index('ix_questions_variant_number',
                    'questions', ['variant_number'])

    # –ö–æ–º–ø–æ–∑–∏—Ç–Ω—ã–π –∏–Ω–¥–µ–∫—Å –¥–ª—è project + variant
    op.create_index('ix_questions_project_variant',
                    'questions', ['project_id', 'variant_number'])

    # –î–æ–±–∞–≤–ª—è–µ–º variant_number –≤ tests
    op.add_column('tests',
        sa.Column('variant_number', sa.Integer(),
                  nullable=False, server_default='1'))

def downgrade():
    op.drop_column('tests', 'variant_number')
    op.drop_index('ix_questions_project_variant', 'questions')
    op.drop_index('ix_questions_variant_number', 'questions')
    op.drop_column('questions', 'variant_number')
```

#### 3.3 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Celery –∑–∞–¥–∞—á–∏

**backend/app/tasks/test_tasks.py**:

```python
@celery.task(name="generate_test_questions", bind=True, queue="tests")
def generate_test_questions(
    self,
    project_id: str,
    material_ids: List[str],
    num_variants: int = 1,  # –ù–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
):
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å max_students –∫–∞–∫ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
    if num_variants == 1 and project.max_students:
        num_variants = min(project.max_students, 10)  # –õ–∏–º–∏—Ç 10 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

    all_questions = []

    # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º N —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
    for variant_num in range(1, num_variants + 1):
        self.update_state(
            state="PROCESSING",
            meta={
                "step": "generating",
                "variant": variant_num,
                "total_variants": num_variants
            }
        )

        # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ —Å —É–Ω–∏–∫–∞–ª—å–Ω–æ–π –ø–æ–¥—Å–∫–∞–∑–∫–æ–π —Ç–µ–º—ã
        questions = generator.generate_questions(
            project_id=project_id,
            question_configs=question_configs,
            topic_hint=f"{project_title} (Variant {variant_num})",
            vector_store_id=vector_store_id
        )

        # –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–º–µ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∫ –∫–∞–∂–¥–æ–º—É –≤–æ–ø—Ä–æ—Å—É
        for q in questions:
            q["variant_number"] = variant_num

        all_questions.extend(questions)

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã —Å variant_number
    for q_data in all_questions:
        question = Question(
            project_id=project_id,
            variant_number=q_data.get("variant_number", 1),
            # ... other fields
        )
        session.add(question)

    return {
        "status": "success",
        "questions_generated": len(all_questions),
        "variants_generated": num_variants
    }
```

#### 3.4 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API endpoint

**backend/app/api/v1/endpoints/projects.py**:

```python
@router.get("/{project_id}/questions")
async def get_project_questions(
    project_id: UUID,
    variant: Optional[int] = None,  # –§–∏–ª—å—Ç—Ä –ø–æ –≤–∞—Ä–∏–∞–Ω—Ç—É
    db: AsyncSession = Depends(get_db)
):
    query = select(Question).where(Question.project_id == project_id)

    if variant:
        query = query.where(Question.variant_number == variant)

    questions = (await db.execute(query.order_by(Question.order))).scalars().all()

    # –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
    variants_query = select(Question.variant_number).where(
        Question.project_id == project_id
    ).distinct()
    variants = [v for (v,) in (await db.execute(variants_query)).all()]
    variants.sort()

    return {
        "questions": [QuestionResponse.model_validate(q) for q in questions],
        "variants": variants,
        "totalVariants": len(variants)
    }
```

#### 3.5 Frontend ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

**src/views/QuestionEditorView.vue**:

```typescript
// –ù–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
const availableVariants = ref<number[]>([]);
const selectedVariant = ref<number | null>(null);

// –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–º—É –≤–∞—Ä–∏–∞–Ω—Ç—É
const filteredQuestions = computed(() => {
  if (selectedVariant.value === null) return questions.value;
  return questions.value.filter(
    (q) => q.variantNumber === selectedVariant.value
  );
});

// –ó–∞–≥—Ä—É–∑–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤ ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –æ—Ç–≤–µ—Ç–∞
const loadQuestions = async () => {
  const res = await api.get(`/projects/${projectId.value}/questions`);

  // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±–æ–∏—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ (—Å—Ç–∞—Ä—ã–π: array, –Ω–æ–≤—ã–π: object)
  if (Array.isArray(res.data)) {
    questions.value = res.data;
    availableVariants.value = [1];
  } else {
    questions.value = res.data.questions || [];
    availableVariants.value = res.data.variants || [1];
  }

  // –í—ã–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  if (availableVariants.value.length > 0 && selectedVariant.value === null) {
    selectedVariant.value = availableVariants.value[0] ?? null;
  }
};
```

**Template ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤**:

```vue
<!-- Variant Selector (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ > 1) -->
<div v-if="availableVariants.length > 1" class="variant-selector">
  <span class="variant-label">Test Variant:</span>
  <el-radio-group v-model="selectedVariant" size="default">
    <el-radio-button
      v-for="variant in availableVariants"
      :key="variant"
      :value="variant"
    >
      Variant {{ variant }}
    </el-radio-button>
  </el-radio-group>
  <span class="variant-info">
    ({{ filteredQuestions.length }} questions)
  </span>
</div>
```

#### 3.6 –†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º
docker exec mentis_backend python -c "
from app.db.session import sync_session_maker
from app.models.test import Question
from sqlalchemy import select, func

with sync_session_maker() as db:
    result = db.execute(
        select(Question.variant_number, func.count(Question.id))
        .group_by(Question.variant_number)
        .order_by(Question.variant_number)
    ).all()
    for variant, count in result:
        print(f'Variant {variant}: {count} questions')
"

# Output:
# Variant 1: 26 questions
# Variant 2: 26 questions
# Variant 3: 26 questions
# Total: 78 questions (3 variants √ó 26 questions each)
```

---

### üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (–°–µ—Å—Å–∏—è 2, 05.12.2025)

| –§–∞–π–ª                                                       | –ò–∑–º–µ–Ω–µ–Ω–∏—è                                       |
| ---------------------------------------------------------- | ----------------------------------------------- |
| `backend/app/models/participant.py`                        | +`confirmation_status`, +`student_user_id`      |
| `backend/app/models/user.py`                               | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω `foreign_keys` –≤ relationship         |
| `backend/app/models/test.py`                               | +`variant_number` –≤ Question –∏ Test             |
| `backend/app/api/v1/endpoints/participants.py`             | +lookup, +confirm, +reject, +contact-request    |
| `backend/app/api/v1/endpoints/projects.py`                 | –û–±–Ω–æ–≤–ª—ë–Ω questions endpoint —Å variant filtering |
| `backend/app/tasks/test_tasks.py`                          | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è N –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤                           |
| `backend/alembic/versions/003_participant_confirmation.py` | –ù–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è                                  |
| `backend/alembic/versions/004_test_variants.py`            | –ù–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è                                  |
| `src/views/TeacherParticipantsView.vue`                    | –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ, —Å—Ç–∞—Ç—É—Å –∫–æ–ª–æ–Ω–∫–∞                  |
| `src/views/TeacherDashboardView.vue`                       | +`onMounted` ‚Üí `fetchProjects()`                |
| `src/views/StudentDashboardView.vue`                       | +Notifications tab                              |
| `src/views/LobbyView.vue`                                  | –í—ã–±–æ—Ä confirmed participants                    |
| `src/views/QuestionEditorView.vue`                         | –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤                         |
| `src/services/participant.service.ts`                      | +`page` –ø–∞—Ä–∞–º–µ—Ç—Ä, –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã                  |

---

### üîß –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

```bash
# 1. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose up -d --build backend nginx

# 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Celery (–í–ê–ñ–ù–û! —á—Ç–æ–±—ã –ø–æ–¥—Ö–≤–∞—Ç–∏–ª –Ω–æ–≤—ã–π –∫–æ–¥ –∑–∞–¥–∞—á)
docker-compose restart celery_worker

# 3. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
docker exec mentis_backend alembic upgrade head

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker logs mentis_backend --tail 20
docker logs mentis_celery_worker --tail 20
```

---

### ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π —Å–µ—Å—Å–∏–∏

1. **–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã** –∏–º–µ—é—Ç `variant_number = 1`. –ß—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤, –Ω—É–∂–Ω–æ **–ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã** —á–µ—Ä–µ–∑ UI –∏–ª–∏ Celery –∑–∞–¥–∞—á—É.

2. **–õ–∏–º–∏—Ç –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤** ‚Äî –º–∞–∫—Å–∏–º—É–º 10 (—á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å OpenAI API –∏ –Ω–µ –∑–∞–Ω–∏–º–∞—Ç—å –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏).

3. **–ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤** –ø–æ—è–≤–ª—è–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ > 1**.

4. **–ü—Ä–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏ —Ç–µ—Å—Ç–∞ —Å—Ç—É–¥–µ–Ω—Ç—É** ‚Äî –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –≤—ã–±–æ—Ä–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞:
   - –ü—Ä–æ—Å—Ç–æ–π –ø–æ–¥—Ö–æ–¥: `variant = (student_index % total_variants) + 1`
   - –°–ª—É—á–∞–π–Ω—ã–π: `variant = random.randint(1, total_variants)`

---

## üìå –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç                    | –°—Ç–∞—Ç—É—Å         | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ                      |
| ---------------------------- | -------------- | ------------------------------- |
| Frontend (Vue 3)             | ‚úÖ –ì–æ—Ç–æ–≤       | –í—Å–µ views —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã           |
| Backend (FastAPI)            | ‚úÖ –ì–æ—Ç–æ–≤       | –í—Å–µ endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã       |
| PostgreSQL                   | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç    | 4 –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã            |
| Redis                        | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç    | Celery broker active            |
| OpenAI Vector Stores         | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç    | –î–≤—É—Ö—à–∞–≥–æ–≤—ã–π RAG                 |
| Celery Worker                | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç    | N –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è           |
| Nginx                        | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç    | Frontend build                  |
| Cloudflare Tunnel            | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç    | HTTPS                           |
| **AI Generation**            | ‚úÖ –†–ê–ë–û–¢–ê–ï–¢    | –†–µ–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤     |
| **Test Variants**            | ‚úÖ –†–ê–ë–û–¢–ê–ï–¢    | 3 –≤–∞—Ä–∏–∞–Ω—Ç–∞ √ó 26 –≤–æ–ø—Ä–æ—Å–æ–≤        |
| **Participant Confirmation** | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ | Backend ready, frontend partial |

---

## üöÄ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é —Å–µ—Å—Å–∏—é

1. **–î–æ—Ä–∞–±–æ—Ç–∞—Ç—å StudentDashboardView** ‚Äî –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π UI –¥–ª—è Notifications tab
2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤ TestTakeView** ‚Äî —Å—Ç—É–¥–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π flow** ‚Äî –æ—Ç —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–º
4. **WebSocket –¥–ª—è Lobby** ‚Äî real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
5. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º** ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–µ–∂–¥—É –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏

---

## üìù –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ—Ç 08.12.2025 ‚Äî Claude Opus 4.5

### üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏ —Å–µ—Å—Å–∏–∏

1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –Ω–∞ Lobby —Å—Ç—Ä–∞–Ω–∏—Ü–µ
2. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ DateTime timezone (500 –ø—Ä–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ—Å—Ç–∞)
3. ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –Ω–∞ Lobby —Å—Ç—Ä–∞–Ω–∏—Ü–µ
4. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∞–º (–∫–æ–Ω—Ç—Ä–æ–ª—å –ø–æ –≤—Ä–µ–º–µ–Ω–∏)
5. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ (—Å—Ç—É–¥–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞–ª–∏ –≤—Å–µ 160 –≤–æ–ø—Ä–æ—Å–æ–≤ –≤–º–µ—Å—Ç–æ 8)
6. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞ –¥–ª—è –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
7. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥—Å—á—ë—Ç–∞ –±–∞–ª–ª–æ–≤ (–ø–æ–∫–∞–∑—ã–≤–∞–ª–æ 0/160 –≤–º–µ—Å—Ç–æ X/8)
8. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤ –≤ OpenAI Vector Store

---

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –Ω–∞ Lobby —Å—Ç—Ä–∞–Ω–∏—Ü–µ

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Lobby –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –∫–ª—é—á–∏ –≤–º–µ—Å—Ç–æ –ø–µ—Ä–µ–≤–µ–¥—ë–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ (`lobby.selectStudent`, `lobby.noConfirmedContacts` –∏ —Ç.–¥.)

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–µ—Ä–µ–≤–æ–¥—ã –≤–æ –≤—Å–µ 4 locale —Ñ–∞–π–ª–∞:

```typescript
// src/i18n/locales/*.ts
lobby: {
  selectStudent: "Select Student",
  noConfirmedContacts: "No confirmed contacts available",
  addStudentsFirst: "Add students to this project first",
  selectedStudents: "Selected Students",
  // ... –∏ –¥—Ä—É–≥–∏–µ
}
```

**–§–∞–π–ª—ã**: `en.ts`, `ru.ts`, `ua.ts`, `pl.ts`

---

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ DateTime timezone

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ç–µ—Å—Ç–∞ —Å `start_time` –∏ `end_time` –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞ 500:

```
can't subtract offset-naive and offset-aware datetimes
```

**–ü—Ä–∏—á–∏–Ω–∞**: Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–ª datetime —Å timezone (`2025-12-08T10:00:00.000Z`), –∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Ö—Ä–∞–Ω–∏–ª–∏—Å—å naive datetime.

**–†–µ—à–µ–Ω–∏–µ** –≤ `backend/app/api/v1/endpoints/projects.py`:

```python
@router.patch("/{project_id}/schedule")
async def schedule_project(...):
    # Strip timezone info for database storage
    if data.start_time:
        start_time = data.start_time.replace(tzinfo=None) if data.start_time.tzinfo else data.start_time
    if data.end_time:
        end_time = data.end_time.replace(tzinfo=None) if data.end_time.tzinfo else data.end_time
```

---

### 3. –£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ –Ω–∞ Lobby —Å—Ç—Ä–∞–Ω–∏—Ü–µ

**–ë—ã–ª–æ**: 3 –∫–Ω–æ–ø–∫–∏ ‚Äî "Start Test", "Schedule Test", "Activate Test" (–ø—É—Ç–∞–Ω–∏—Ü–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ)

**–°—Ç–∞–ª–æ**: 2 –∫–Ω–æ–ø–∫–∏:

- **Schedule Test** ‚Äî —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞/–æ–∫–æ–Ω—á–∞–Ω–∏—è —Ç–µ—Å—Ç–∞
- **Activate Test** ‚Äî –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ç–µ—Å—Ç –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤

**–§–∞–π–ª**: `src/views/LobbyView.vue`

---

### 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∞–º

**–ü—Ä–æ–±–ª–µ–º–∞**: –°—Ç—É–¥–µ–Ω—Ç—ã –Ω–µ –º–æ–≥–ª–∏ –≤–∏–¥–µ—Ç—å/–Ω–∞—á–∞—Ç—å –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã.

**–†–µ—à–µ–Ω–∏–µ** –≤ `backend/app/api/v1/endpoints/student.py`:

```python
# –°—Ç—É–¥–µ–Ω—Ç –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å —Ç–µ—Å—Ç –µ—Å–ª–∏:
# 1. –ü—Ä–æ–µ–∫—Ç –∞–∫—Ç–∏–≤–µ–Ω (status = "active"), –ò–õ–ò
# 2. –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ (status = "ready") –ò —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è >= start_time

now = datetime.utcnow()
for project in projects:
    is_available = (
        project.status == "active" or
        (project.status == "ready" and project.start_time and project.start_time <= now)
    )
```

---

### 5. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ç–µ—Å—Ç–∞

**–ü—Ä–æ–±–ª–µ–º–∞**: –°—Ç—É–¥–µ–Ω—Ç—ã –ø–æ–ª—É—á–∞–ª–∏ –í–°–ï –≤–æ–ø—Ä–æ—Å—ã (160 —à—Ç—É–∫) –≤–º–µ—Å—Ç–æ –≤–æ–ø—Ä–æ—Å–æ–≤ –æ–¥–Ω–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞ (8 —à—Ç—É–∫).

**–ü—Ä–∏—á–∏–Ω–∞**: –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Ç–µ—Å—Ç–∞ –Ω–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–ª–∏—Å—å –≤–æ–ø—Ä–æ—Å—ã –ø–æ `variant_number`.

**–†–µ—à–µ–Ω–∏–µ** –≤ `backend/app/api/v1/endpoints/student.py`:

```python
@router.post("/tests/{project_id}/start")
async def start_test_for_student(...):
    # –ü–æ–ª—É—á–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
    variants_result = await db.execute(
        select(Question.variant_number)
        .where(Question.project_id == project_id)
        .distinct()
    )
    available_variants = [v for (v,) in variants_result.all()]

    # –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º —Å–ª—É—á–∞–π–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
    import random
    assigned_variant = random.choice(available_variants) if available_variants else 1

    # –°–æ–∑–¥–∞—ë–º —Ç–µ—Å—Ç —Å –ø—Ä–∏—Å–≤–æ–µ–Ω–Ω—ã–º –≤–∞—Ä–∏–∞–Ω—Ç–æ–º
    test = Test(
        project_id=project_id,
        student_id=current_user.id,
        variant_number=assigned_variant,
        status="in_progress"
    )

    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –¢–û–õ–¨–ö–û –≤–æ–ø—Ä–æ—Å—ã —ç—Ç–æ–≥–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞
    questions = await db.execute(
        select(Question)
        .where(Question.project_id == project_id)
        .where(Question.variant_number == assigned_variant)
    )
```

---

### 6. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞ –¥–ª—è –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª**: –ù–∞ StudentDashboardView –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–∞–π–º–µ—Ä –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞ –¥–æ –Ω–∞—á–∞–ª–∞ —Ç–µ—Å—Ç–∞.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è** –≤ `src/views/StudentDashboardView.vue`:

```typescript
// –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–æ –Ω–∞—á–∞–ª–∞ —Ç–µ—Å—Ç–∞
const countdownTimers = computed(() => {
  const timers: Record<string, string> = {};
  for (const test of upcomingTests.value) {
    if (test.status === "scheduled" && test.startTime) {
      timers[test.id] = formatCountdown(test.startTime);
    }
  }
  return timers;
});

// –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –æ—Ç—Å—á—ë—Ç–∞
const formatCountdown = (startTime: string): string => {
  const start = new Date(startTime).getTime();
  const now = currentTime.value;
  const diff = start - now;

  if (diff <= 0) return t("student.testStarted");

  const hours = Math.floor(diff / (1000 * 60 * 60));
  const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
  const seconds = Math.floor((diff % (1000 * 60)) / 1000);

  return `${hours}h ${minutes}m ${seconds}s`;
};

// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
onMounted(() => {
  countdownInterval = setInterval(() => {
    currentTime.value = Date.now();
  }, 1000);
});
```

**–ù–æ–≤—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã**:

```typescript
student: {
  startsIn: "Starts in",
  testStarted: "Test started!",
  // ...
}
```

---

### 7. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥—Å—á—ë—Ç–∞ –±–∞–ª–ª–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ—Å–ª–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞–ª–æ "Score: 0/160" –≤–º–µ—Å—Ç–æ "Score: X/8".

**–ü—Ä–∏—á–∏–Ω–∞**: `submit_test` –∏ `get_test_results` –Ω–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–ª–∏ –≤–æ–ø—Ä–æ—Å—ã –ø–æ `variant_number`.

**–†–µ—à–µ–Ω–∏–µ** –≤ `backend/app/api/v1/endpoints/student.py`:

```python
@router.post("/tests/{test_id}/submit")
async def submit_test(...):
    # –ü–æ–ª—É—á–∞–µ–º –≤–æ–ø—Ä–æ—Å—ã –¢–û–õ–¨–ö–û –¥–ª—è –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞
    questions = await db.execute(
        select(Question)
        .where(Question.project_id == test.project_id)
        .where(Question.variant_number == test.variant_number)
    )

    # –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ–º max_score –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –≤–∞—Ä–∏–∞–Ω—Ç–∞
    max_score = sum(q.points for q in questions_list)

    # ... grading logic ...

    test.max_score = max_score  # –¢–µ–ø–µ—Ä—å 8, –∞ –Ω–µ 160

@router.get("/tests/{test_id}/results")
async def get_test_results(...):
    # –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ ‚Äî —Ñ–∏–ª—å—Ç—Ä—É–µ–º –ø–æ variant_number
    questions = await db.execute(
        select(Question)
        .where(Question.project_id == test.project_id)
        .where(Question.variant_number == test.variant_number)
    )
```

---

### 8. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ —Ñ–∞–π–ª–æ–≤ –≤ OpenAI Vector Store

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞ 500:

```
ValueError: Vector Store has no indexed files. Status: {'file_counts': {'failed': 1, 'completed': 0}}
```

**–ü—Ä–∏—á–∏–Ω–∞**: –§–∞–π–ª—ã, –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –≤ OpenAI —Ä–∞–Ω–µ–µ, –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã —á–µ—Ä–µ–∑ –≤–µ–±-–ø–∞–Ω–µ–ª—å https://platform.openai.com/storage/, –Ω–æ –∏—Ö `openai_file_id` –æ—Å—Ç–∞–ª–∏—Å—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –¥–æ–±–∞–≤–∏—Ç—å —ç—Ç–∏ —Ñ–∞–π–ª—ã –≤ –Ω–æ–≤—ã–π Vector Store, OpenAI –Ω–µ –º–æ–≥ –∏—Ö –Ω–∞–π—Ç–∏.

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** (–¥–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ):

```python
# backend/app/services/openai_vectorstore.py
def add_file_to_vector_store(...):
    print(f"Adding file {file_id} to vector store {vector_store_id}...")
    print(f"Initial file status: {vs_file.status}")
    # ...
    print(f"Final file status: {vs_file.status}, last_error: {vs_file.last_error}")
```

**–õ–æ–≥–∏ –ø–æ–∫–∞–∑–∞–ª–∏**:

```
Final file status: failed, last_error: LastError(code='invalid_file', message='The file could not be parsed.')
```

**–†–µ—à–µ–Ω–∏–µ 1** ‚Äî –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ failed —Å—Ç–∞—Ç—É—Å:

```python
# backend/app/services/openai_vectorstore.py
def add_file_to_vector_store(...):
    # ... polling loop ...

    # Check if file indexing failed
    if vs_file.status in ["failed", "cancelled"]:
        error_msg = vs_file.last_error if vs_file.last_error else "Unknown error"
        raise ValueError(f"File indexing {vs_file.status}: {error_msg}")
```

**–†–µ—à–µ–Ω–∏–µ 2** ‚Äî –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö file_id –∏–∑ –ë–î:

```bash
docker exec mentis_backend python -c "
from app.db.session import sync_session_maker
from app.models.material import Material
from sqlalchemy import update

with sync_session_maker() as db:
    result = db.execute(update(Material).values(openai_file_id=None))
    db.commit()
    print(f'Cleared openai_file_id for {result.rowcount} materials')
"
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –§–∞–π–ª—ã —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ –ø—Ä–∏ –∫–∞–∂–¥–æ–π –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

---

### üìÅ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (08.12.2025)

| –§–∞–π–ª                                         | –ò–∑–º–µ–Ω–µ–Ω–∏—è                                             |
| -------------------------------------------- | ----------------------------------------------------- |
| `src/i18n/locales/en.ts`                     | +lobby –ø–µ—Ä–µ–≤–æ–¥—ã, +countdown –ø–µ—Ä–µ–≤–æ–¥—ã                  |
| `src/i18n/locales/ru.ts`                     | +lobby –ø–µ—Ä–µ–≤–æ–¥—ã, +countdown –ø–µ—Ä–µ–≤–æ–¥—ã                  |
| `src/i18n/locales/ua.ts`                     | +lobby –ø–µ—Ä–µ–≤–æ–¥—ã, +countdown –ø–µ—Ä–µ–≤–æ–¥—ã                  |
| `src/i18n/locales/pl.ts`                     | +lobby –ø–µ—Ä–µ–≤–æ–¥—ã, +countdown –ø–µ—Ä–µ–≤–æ–¥—ã                  |
| `src/views/LobbyView.vue`                    | –£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ (2 –≤–º–µ—Å—Ç–æ 3)                         |
| `src/views/StudentDashboardView.vue`         | +Countdown timer –¥–ª—è scheduled —Ç–µ—Å—Ç–æ–≤                 |
| `backend/app/api/v1/endpoints/projects.py`   | DateTime timezone fix                                 |
| `backend/app/api/v1/endpoints/student.py`    | Access control, variant assignment, score calculation |
| `backend/app/services/openai_vectorstore.py` | +Failed status check, +debug logging                  |
| `backend/app/tasks/document_tasks.py`        | +Failed materials tracking                            |

---

### üîß –í–∞–∂–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Celery worker (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤, –≤–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è)
docker logs mentis_celery_worker --tail 100

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ backend
docker logs mentis_backend --tail 50

# –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ OpenAI file_id (–µ—Å–ª–∏ —Ñ–∞–π–ª—ã —É–¥–∞–ª–µ–Ω—ã –∏–∑ OpenAI)
docker exec mentis_backend python -c "
from app.db.session import sync_session_maker
from app.models.material import Material
from sqlalchemy import update

with sync_session_maker() as db:
    db.execute(update(Material).values(openai_file_id=None))
    db.commit()
"

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose up -d --build backend celery_worker

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker ps
```

---

### ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

1. **OpenAI file_id –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ï—Å–ª–∏ —Ñ–∞–π–ª—ã —É–¥–∞–ª–µ–Ω—ã –∏–∑ OpenAI —á–µ—Ä–µ–∑ –≤–µ–±-–ø–∞–Ω–µ–ª—å, –Ω—É–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å `openai_file_id` –≤ –ë–î –∫–æ–º–∞–Ω–¥–æ–π –≤—ã—à–µ.

2. **Timezone**: Backend —Ö—Ä–∞–Ω–∏—Ç datetime –±–µ–∑ timezone (naive). Frontend –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å timezone ‚Äî backend –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ strip'–∞–µ—Ç.

3. **–í–∞—Ä–∏–∞–Ω—Ç—ã —Ç–µ—Å—Ç–æ–≤**: –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Ç–µ—Å—Ç–∞ —Å—Ç—É–¥–µ–Ω—Ç—É —Å–ª—É—á–∞–π–Ω–æ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –æ–¥–∏–Ω –∏–∑ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤. –í–æ–ø—Ä–æ—Å—ã —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è –ø–æ `variant_number`.

4. **–ü–æ–¥—Å—á—ë—Ç –±–∞–ª–ª–æ–≤**: `max_score` —Ç–µ–ø–µ—Ä—å –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –≤–∞—Ä–∏–∞–Ω—Ç–∞, –∞ –Ω–µ –≤—Å–µ—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞.

---

## üìå –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç             | –°—Ç–∞—Ç—É—Å      | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ                |
| --------------------- | ----------- | ------------------------- |
| Frontend (Vue 3)      | ‚úÖ –ì–æ—Ç–æ–≤    | –í—Å–µ views —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã     |
| Backend (FastAPI)     | ‚úÖ –ì–æ—Ç–æ–≤    | –í—Å–µ endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã |
| PostgreSQL            | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 6 –º–∏–≥—Ä–∞—Ü–∏–π –ø—Ä–∏–º–µ–Ω–µ–Ω—ã      |
| Redis                 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | Celery broker active      |
| OpenAI Vector Stores  | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | +error handling           |
| Celery Worker         | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç        |
| Nginx                 | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | Frontend build            |
| Cloudflare Tunnel     | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | HTTPS                     |
| **AI Generation**     | ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ | –ö–æ–Ω—Ç–µ–Ω—Ç –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤     |
| **Test Variants**     | ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ | –°–ª—É—á–∞–π–Ω–æ–µ –ø—Ä–∏—Å–≤–æ–µ–Ω–∏–µ      |
| **Score Calculation** | ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ | –ü–æ –≤–∞—Ä–∏–∞–Ω—Ç—É (8 –≤–æ–ø—Ä–æ—Å–æ–≤)  |
| **Countdown Timer**   | ‚úÖ –†–ê–ë–û–¢–ê–ï–¢ | Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ      |

---

## üöÄ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –Ω–∞ —Å–ª–µ–¥—É—é—â—É—é —Å–µ—Å—Å–∏—é

1. **WebSocket –¥–ª—è Lobby** ‚Äî real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤
2. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤–∞—Ä–∏–∞–Ω—Ç–∞–º** ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–µ–∂–¥—É –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏
3. **–£–ª—É—á—à–µ–Ω–∏–µ UI** ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–æ–º–µ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Å—Ç—É–¥–µ–Ω—Ç—É
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ edge cases** ‚Äî –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
5. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** ‚Äî Prometheus/Grafana –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è

---

_–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 8 –¥–µ–∫–∞–±—Ä—è 2025_
_–ê–≤—Ç–æ—Ä —Å–µ—Å—Å–∏–∏: Claude Opus 4.5 (Preview)_
_Frontend –≤–µ—Ä—Å–∏—è: 0.0.0 (pre-release)_
_Backend –≤–µ—Ä—Å–∏—è: 1.2.0_
